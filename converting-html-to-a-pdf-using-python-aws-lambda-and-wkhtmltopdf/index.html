<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8d90a1693e0a40b71e2a.css" id="gatsby-global-css">@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}[data-rmiz-wrap=hidden],[data-rmiz-wrap=visible]{position:relative;display:inline-flex;align-items:flex-start}[data-rmiz-wrap=hidden]{visibility:hidden}[data-rmiz-overlay]{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;transition-property:background-color}[data-rmiz-btn-close],[data-rmiz-btn-open]{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:0;padding:0;border:none;border-radius:0;font:inherit;color:inherit;background:none;-webkit-appearance:none;appearance:none}[data-rmiz-btn-open]{cursor:zoom-in}[data-rmiz-btn-close]{cursor:zoom-out}[data-rmiz-modal-content]{position:absolute;transition-property:transform;transform-origin:center center}</style><meta name="generator" content="Gatsby 2.32.11"/><title data-react-helmet="true">Converting HTML to a PDF using Python, AWS Lambda, and wkhtmltopdf</title><meta data-react-helmet="true" charSet="utf-8"/><meta data-react-helmet="true" http-equiv="X-UA-Compatible" content="IE=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" name="theme-color" content="#fff"/><meta data-react-helmet="true" itemProp="name" content="Converting HTML to a PDF using Python, AWS Lambda, and wkhtmltopdf"/><meta data-react-helmet="true" itemProp="description" content="Setting up usage of wkhtmltopdf with Python in an AWS Lambda function for easy HTML to PDF conversion."/><meta data-react-helmet="true" itemProp="image" content="https://bschoeneweis.github.io/static/2e9f00a9af04ea030c46b243cc917427/0ff54/hero.jpg"/><meta data-react-helmet="true" name="description" content="Setting up usage of wkhtmltopdf with Python in an AWS Lambda function for easy HTML to PDF conversion."/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site" content="Bradley Schoeneweis"/><meta data-react-helmet="true" name="twitter:title" content="Converting HTML to a PDF using Python, AWS Lambda, and wkhtmltopdf"/><meta data-react-helmet="true" name="twitter:description" content="Setting up usage of wkhtmltopdf with Python in an AWS Lambda function for easy HTML to PDF conversion."/><meta data-react-helmet="true" name="twitter:creator" content="https://twitter.com/bschoeneweis"/><meta data-react-helmet="true" name="twitter:image" content="https://bschoeneweis.github.io/static/2e9f00a9af04ea030c46b243cc917427/0ff54/hero.jpg"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Converting HTML to a PDF using Python, AWS Lambda, and wkhtmltopdf"/><meta data-react-helmet="true" property="og:url" content="https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf"/><meta data-react-helmet="true" property="og:image" content="https://bschoeneweis.github.io/static/2e9f00a9af04ea030c46b243cc917427/0ff54/hero.jpg"/><meta data-react-helmet="true" property="og:description" content="Setting up usage of wkhtmltopdf with Python in an AWS Lambda function for easy HTML to PDF conversion."/><meta data-react-helmet="true" property="og:site_name" content="Bradley Schoeneweis"/><meta data-react-helmet="true" name="article:published_time" content="April 29th, 2021"/><meta data-react-helmet="true" name="twitter:label1" value="Reading time"/><meta data-react-helmet="true" name="twitter:data1" value="6 min read"/><script data-react-helmet="true" type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://bschoeneweis.github.io/#organization","name":"Bradley Schoeneweis","url":"https://bschoeneweis.github.io","sameAs":["https://twitter.com/bschoeneweis","https://github.com/bschoeneweis","https://www.linkedin.com/in/bradley-schoeneweis/","https://bradley-schoeneweis.medium.com/"],"logo":{"@type":"ImageObject","@id":"https://bschoeneweis.github.io/#logo","inLanguage":"en-US","url":"https://bschoeneweis.github.io/icons/icon-512x512.png","width":512,"height":512,"caption":"Bradley Schoeneweis"},"image":{"@id":"https://bschoeneweis.github.io/#logo"}},{"@type":"WebSite","@id":"https://bschoeneweis.github.io/#website","url":"https://bschoeneweis.github.io","name":"Bradley Schoeneweis","description":"Bradley Schoeneweis | Development","publisher":{"@id":"https://bschoeneweis.github.io/#organization"},"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#primaryimage","inLanguage":"en-US","url":"https://bschoeneweis.github.io/static/2e9f00a9af04ea030c46b243cc917427/0ff54/hero.jpg","width":1200,"height":628},{"@type":["WebPage"],"@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#webpage","url":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf","name":"Converting HTML to a PDF using Python, AWS Lambda, and wkhtmltopdf","isPartOf":{"@id":"https://bschoeneweis.github.io/#website"},"primaryImageOfPage":{"@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#primaryimage"},"datePublished":"2021-04-29T00:00:00.000Z","dateModified":"2021-04-29T00:00:00.000Z","description":"Setting up usage of wkhtmltopdf with Python in an AWS Lambda function for easy HTML to PDF conversion.","breadcrumb":{"@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#breadcrumb"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://bschoeneweis.github.io","url":"https://bschoeneweis.github.io","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf","url":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf","name":"Converting HTML to a PDF using Python, AWS Lambda, and wkhtmltopdf"}}]},{"@type":"Article","@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#article","isPartOf":{"@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#webpage"},"author":{"@id":"https://bschoeneweis.github.io/#/schema/authors/bradley-schoeneweis"},"headline":"Converting HTML to a PDF using Python, AWS Lambda, and wkhtmltopdf","datePublished":"2021-04-29T00:00:00.000Z","dateModified":"2021-04-29T00:00:00.000Z","mainEntityOfPage":{"@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#webpage"},"publisher":{"@id":"https://bschoeneweis.github.io/#organization"},"image":{"@id":"https://bschoeneweis.github.io/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/#primaryimage"},"inLanguage":"en-US"},{"@type":["Person"],"@id":"https://bschoeneweis.github.io/#/schema/authors/bradley-schoeneweis","name":"Bradley Schoeneweis","image":{"@type":"ImageObject","@id":"https://bschoeneweis.github.io/#personlogo","inLanguage":"en-US","caption":"Bradley Schoeneweis"},"description":"Software Developer | Fort Worth, TX &#x1F4CD
","sameAs":["https://twitter.com/bschoeneweis","https://github.com/bschoeneweis","https://www.linkedin.com/in/bradley-schoeneweis/","https://bradley-schoeneweis.medium.com/"]}]}</script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=f36bc78b7b84f7d1ce0a3361ca27876d" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#fff"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=f36bc78b7b84f7d1ce0a3361ca27876d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=f36bc78b7b84f7d1ce0a3361ca27876d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=f36bc78b7b84f7d1ce0a3361ca27876d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=f36bc78b7b84f7d1ce0a3361ca27876d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=f36bc78b7b84f7d1ce0a3361ca27876d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=f36bc78b7b84f7d1ce0a3361ca27876d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=f36bc78b7b84f7d1ce0a3361ca27876d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=f36bc78b7b84f7d1ce0a3361ca27876d"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-193041393-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-193041393-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link as="script" rel="preload" href="/webpack-runtime-0b1a66e5e73029bfdd8f.js"/><link as="script" rel="preload" href="/framework-cd3e1e804d552fa282ef.js"/><link as="script" rel="preload" href="/app-eb064189f86699328b9e.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/f0e45107-a3343bfd228e5d0d4653.js"/><link as="script" rel="preload" href="/commons-350dcf52cd03bc287f53.js"/><link as="script" rel="preload" href="/f7f859cd4bf156c2acc6f46f65ba39cb35d4c0a9-f0a4faad5fd03e711cbd.js"/><link as="script" rel="preload" href="/component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx-2105f3c8a0d648aa7c73.js"/><link as="fetch" rel="preload" href="/page-data/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1143375668.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1491088328.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1921650733.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2068910035.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2444214635.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="acmv4e">body{--theme-ui-colors-prism-token:var(--theme-ui-colors-prism-token,#fff);--theme-ui-colors-prism-languageJavascript:var(--theme-ui-colors-prism-languageJavascript,#e8696b);--theme-ui-colors-prism-javascript:var(--theme-ui-colors-prism-javascript,#e8696b);--theme-ui-colors-prism-background:var(--theme-ui-colors-prism-background,#292c34);--theme-ui-colors-prism-comment:var(--theme-ui-colors-prism-comment,#5e6a76);--theme-ui-colors-prism-string:var(--theme-ui-colors-prism-string,#a8e2a8);--theme-ui-colors-prism-var:var(--theme-ui-colors-prism-var,#b3bac5);--theme-ui-colors-prism-number:var(--theme-ui-colors-prism-number,#e4854d);--theme-ui-colors-prism-constant:var(--theme-ui-colors-prism-constant,#b3bac5);--theme-ui-colors-prism-plain:var(--theme-ui-colors-prism-plain,#fff);--theme-ui-colors-prism-doctype:var(--theme-ui-colors-prism-doctype,#e8696b);--theme-ui-colors-prism-tag:var(--theme-ui-colors-prism-tag,#e8696b);--theme-ui-colors-prism-keyword:var(--theme-ui-colors-prism-keyword,#d49fd4);--theme-ui-colors-prism-boolean:var(--theme-ui-colors-prism-boolean,#ff5874);--theme-ui-colors-prism-function:var(--theme-ui-colors-prism-function,#5F8DC3);--theme-ui-colors-prism-parameter:var(--theme-ui-colors-prism-parameter,#F9965D);--theme-ui-colors-prism-className:var(--theme-ui-colors-prism-className,#ffcf74);--theme-ui-colors-prism-attrName:var(--theme-ui-colors-prism-attrName,#bf87ba);--theme-ui-colors-prism-attrValue:var(--theme-ui-colors-prism-attrValue,#a8e2a8);--theme-ui-colors-prism-interpolation:var(--theme-ui-colors-prism-interpolation,#fff);--theme-ui-colors-prism-punctuation:var(--theme-ui-colors-prism-punctuation,#5FA8AA);--theme-ui-colors-prism-maybe-class-name:var(--theme-ui-colors-prism-maybe-class-name,#fff);--theme-ui-colors-prism-property:var(--theme-ui-colors-prism-property,#80cbc4);--theme-ui-colors-prism-propertyAccess:var(--theme-ui-colors-prism-propertyAccess,#fff);--theme-ui-colors-prism-namespace:var(--theme-ui-colors-prism-namespace,#b2ccd6);--theme-ui-colors-prism-highlight:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));--theme-ui-colors-prism-highlightBorder:var(--theme-ui-colors-prism-highlightBorder,#e1bde2);--theme-ui-colors-prism-dom:var(--theme-ui-colors-prism-dom,#5F8DC3);--theme-ui-colors-prism-operator:var(--theme-ui-colors-prism-operator,#5FA8AA);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#000);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#73737D);--theme-ui-colors-grey:var(--theme-ui-colors-grey,#73737D);--theme-ui-colors-background:var(--theme-ui-colors-background,#fafafa);--theme-ui-colors-accent:var(--theme-ui-colors-accent,#6166DC);--theme-ui-colors-hover:var(--theme-ui-colors-hover,rgba(0,0,0,0.07));--theme-ui-colors-gradient:var(--theme-ui-colors-gradient,linear-gradient(180deg,rgba(217,219,224,0) 0%,#D9DBE0 100%));--theme-ui-colors-articleText:var(--theme-ui-colors-articleText,#08080B);--theme-ui-colors-track:var(--theme-ui-colors-track,rgba(8,8,11,0.3));--theme-ui-colors-progress:var(--theme-ui-colors-progress,#000);--theme-ui-colors-card:var(--theme-ui-colors-card,#fff);--theme-ui-colors-error:var(--theme-ui-colors-error,#EE565B);--theme-ui-colors-success:var(--theme-ui-colors-success,#46B17B);--theme-ui-colors-errorBackground:var(--theme-ui-colors-errorBackground,rgba(238,86,91,0.1));--theme-ui-colors-horizontalRule:var(--theme-ui-colors-horizontalRule,rgba(8,8,11,0.15));--theme-ui-colors-inputBackground:var(--theme-ui-colors-inputBackground,rgba(0,0,0,0.05));color:var(--theme-ui-colors-text,undefined);background-color:var(--theme-ui-colors-background,var(--theme-ui-colors-background,#fafafa));}body.theme-ui-dark{--theme-ui-colors-grey:var(--theme-ui-colors-modes-dark-grey,#73737D);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#fff);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#fff);--theme-ui-colors-accent:var(--theme-ui-colors-modes-dark-accent,#E9DAAC);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#111216);--theme-ui-colors-hover:var(--theme-ui-colors-modes-dark-hover,rgba(255,255,255,0.07));--theme-ui-colors-gradient:var(--theme-ui-colors-modes-dark-gradient,linear-gradient(180deg,#111216 0%,rgba(66,81,98,0.36) 100%));--theme-ui-colors-articleText:var(--theme-ui-colors-modes-dark-articleText,#fff);--theme-ui-colors-track:var(--theme-ui-colors-modes-dark-track,rgba(255,255,255,0.3));--theme-ui-colors-progress:var(--theme-ui-colors-modes-dark-progress,#fff);--theme-ui-colors-card:var(--theme-ui-colors-modes-dark-card,#1D2128);--theme-ui-colors-error:var(--theme-ui-colors-modes-dark-error,#EE565B);--theme-ui-colors-success:var(--theme-ui-colors-modes-dark-success,#46B17B);--theme-ui-colors-errorBackground:var(--theme-ui-colors-modes-dark-errorBackground,rgba(238,86,91,0.1));--theme-ui-colors-horizontalRule:var(--theme-ui-colors-modes-dark-horizontalRule,rgba(255,255,255,0.15));--theme-ui-colors-inputBackground:var(--theme-ui-colors-modes-dark-inputBackground,rgba(255,255,255,0.07));}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1birv2v">.css-1birv2v{position:relative;background:var(--theme-ui-colors-background,#fafafa);-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);min-height:100vh;}</style><div class="css-1birv2v e1u54h6q0"><style data-emotion-css="4x9btz">:root{--ease-in-quad:cubic-bezier(0.55,0.085,0.68,0.53);--ease-in-quart:cubic-bezier(0.895,0.03,0.685,0.22);--ease-out-quad:cubic-bezier(0.25,0.46,0.45,0.94);--ease-out-quart:cubic-bezier(0.165,0.84,0.44,1);--ease-in-out-quad:cubic-bezier(0.455,0.03,0.515,0.955);--ease-in-out-quart:cubic-bezier(0.77,0,0.175,1);}@font-face{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Segoe UI","Arial",sans-serif;font-weight:400;font-style:normal;}*,*:before,*:after{box-sizing:inherit;margin:0;padding:0;font-size:inherit;font-display:block;}:root{-ms-overflow-style:-ms-autohiding-scrollbar;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;cursor:default;font-size:0.625rem;line-height:1.4;}body{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Segoe UI","Arial",sans-serif;font-size:1.6rem;margin:0;font-weight:400;height:100%;}article{word-break:break-word;}button,a{-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}a:focus{outline:none;}audio,canvas,iframe,img,svg,video{vertical-align:middle;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}input,textarea,select,button{font-family:"-apple-system","BlinkMacSystemFont","San Francisco","Helvetica Neue","Helvetica","Ubuntu","Roboto","Noto","Segoe UI","Arial",sans-serif;}.underline{-webkit-text-decoration:underline;text-decoration:underline;}button,input,select,textarea{color:inherit;font-family:inherit;font-style:inherit;font-weight:inherit;}code,kbd,pre,samp{font-family:monospace;}fieldset,button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;outline:none;background:transparent;}table{border-collapse:separate;border-spacing:0;}audio:not([controls]){display:none;}details{display:block;}input:focus,input:active{outline:none;}input[type="number"]{width:auto;}img.Image__Zoom ~ div{background:transparent !important;}</style><style data-emotion-css="il8sto">.css-il8sto{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;}@media (max-width:66.875em){.css-il8sto{max-width:850px;}}@media (max-width:45.9375em){.css-il8sto{padding:0 4rem;max-width:567px;}}@media (max-width:33.75em){.css-il8sto{max-width:100%;}}</style><section class="css-il8sto e9w9r0m0"><style data-emotion-css="ysq45m">.css-ysq45m{position:relative;z-index:100;padding-top:100px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:80em){.css-ysq45m{padding-top:50px;}}@media screen and (max-height:800px){.css-ysq45m{padding-top:50px;}}</style><div class="css-ysq45m e1q3p6rm1"><style data-emotion-css="dj9cqc">.css-dj9cqc{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;left:0;}@media (max-width:80em){.css-dj9cqc{left:0;}}.css-dj9cqc[data-a11y="true"]:focus::after{content:"";position:absolute;left:-10%;top:-30%;width:120%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}.css-dj9cqc:hover .e1q3p6rm0{-webkit-transform:translateX(-3px);-ms-transform:translateX(-3px);transform:translateX(-3px);}</style><a data-a11y="false" title="Navigate back to the homepage" aria-label="Navigate back to the homepage" back="false" class="css-dj9cqc e1q3p6rm2" href="/"><svg width="100%" viewBox="0 0 803 226" fill="#000"><path d="M259.6 12.7c-.3 1-1.5 8.3-2.7 16.3-1.2 8-2.3 14.6-2.4 14.8-.1.2-2-.7-4.1-2-5.3-3.1-16.8-3.2-23.4-.1-10 4.5-17.6 14.4-21.6 27.8-2.1 7.1-2.4 22.1-.6 28.1 1.6 5.4 5.8 10.7 10.5 13.4 7.7 4.4 21.1 3.4 28.1-2.1l2.6-2v6.1h19.6l7.8-49.3c4.2-27 8-50 8.2-51 .5-1.5-.5-1.7-10.5-1.7-9.6 0-11 .2-11.5 1.7zm-11 47.7l2.8 2.3-1.8 12.4c-2.5 16.7-4 19.1-12.8 20.4-3.9.6-4.8.3-7.5-1.9-3.7-3.1-4.6-7.8-3.2-16.5 1.3-8.3 4.5-14.9 8.3-17.2 4.4-2.7 10.8-2.5 14.2.5zM288.6 13.7c-.7 3.4-15.6 97.3-15.6 98.5 0 .4 5 .8 11 .8 6.1 0 11-.2 11-.5 0-.9 15-95.7 15.6-98.8l.6-2.7h-22l-.6 2.7zM14.5 18.2C13.5 22.6 0 108.8 0 110.9c0 2.1.3 2.1 20.9 2.1 28.9 0 38.3-2 47.5-10.1C74.7 97.4 79 87.7 79 79c0-4.9-3.2-11.3-6.9-13.9l-3.2-2.3 3.6-2.6c12.2-9.3 14.1-28.6 3.6-37.5-6.5-5.4-13.8-6.7-38.7-6.7H15l-.5 2.2zM56 36.5c3.7 1.9 4.7 5.5 2.9 10.2-2.4 6.2-5.6 7.8-17 8.1-11.4.4-10.6 1.5-8.7-11.5l1.2-8.3h9.3c6.5 0 10.3.5 12.3 1.5zM50.7 73c5 1.8 6.6 7.3 3.7 13.3-2.6 5.5-6.3 7-18.7 7.5-10.3.4-10.9.4-10.4-1.4.3-1.1 1.1-5.3 1.7-9.4 1.8-12 .8-11 11.4-11 5.1 0 10.7.5 12.3 1zM119.7 40.4c-2.1.8-4.7 2.2-5.8 3.2-1.8 1.6-1.9 1.6-1.9-.4 0-2.1-.4-2.2-10.5-2.2-5.8 0-10.5.2-10.5.5 0 .2-2.5 16-5.5 35-3 18.9-5.5 34.9-5.5 35.5 0 .6 4.2 1 10.9 1h10.8l3.9-23.7 3.9-23.7 3.4-2.3c2.8-1.9 4.8-2.3 10.6-2.3 8.3 0 7.4 1.1 9.6-12.3 1.1-6.7 1.1-8-.1-8.7-2.2-1.4-8.9-1.1-13.3.4zM161.3 40.5c-10.7 3-18.8 9.1-22.4 17-3.4 7.4-3.3 7.5 8.9 7.5h10.8l1.1-3c1.4-3.7 7.1-6.4 11.4-5.5 3.7.8 6.3 4.6 5.5 7.8-.5 2.3-1.1 2.4-9.8 3-5.1.3-12.4 1.5-16.2 2.7-20.9 6.6-27 32.7-9.6 41.3 6.4 3.1 18.6 3.1 24.9 0 4.6-2.3 6.1-2.2 6.1.3 0 1.1 2.1 1.4 11 1.4h11v-8.8c0-4.8 1.1-15.8 2.5-24.5 3-18.8 3.1-22.9.6-28.2-3.7-8-9.9-11.4-22.5-12.1-5.4-.3-9.9.1-13.3 1.1zm12.1 45.2c-.7 5.6-3.5 8.7-9.3 10.3-6.4 1.7-11.8-1.5-10.6-6.3 1.4-5.4 7.1-8.4 16.2-8.6l4.3-.1-.6 4.7zM337.7 40c-15.4 3.9-27.4 17.5-30.7 34.8-1.7 8.2-.9 18.6 1.8 23.7 2 4 7.9 10 11.7 12.1 4.4 2.4 12.9 3.7 20.5 3.1 9.8-.8 17.9-4 24.1-9.5l4.8-4.3-4.6-6.4-4.5-6.3-4.5 3.4c-5.4 4.1-11.2 5.8-17 4.9-5.1-.7-9.9-4.6-10.9-8.7l-.6-2.8 22.8-.2 22.9-.3.7-4c1.1-6 1-19.5-.1-23.4-3.1-10.3-11.7-16-24.8-16.7-4.3-.2-9.5.1-11.6.6zm14 20.2c1.3 1.3 2.3 3.3 2.3 5V68h-23.1l1.5-2.8c2.7-5.3 5.7-7 12.5-7.1 3.3-.1 5.1.5 6.8 2.1zM384 41.4c0 .2 3.2 16 7 35l7 34.6-2 4.1c-2.6 5-7.2 7.9-12.7 7.9-4 0-4.2.2-4.7 3.2-.3 1.8-1 5.7-1.5 8.6-.8 5-.7 5.3 1.5 5.8 4.3 1.1 15.8-.1 19.8-2.1 5.1-2.5 10.1-7.7 14.1-15 3.7-6.7 42.5-81.7 42.5-82.2 0-.2-5.3-.3-11.8-.3h-11.9l-8.9 19.5c-10.2 22.6-9.1 22.8-12.5-2.8L407.7 41h-11.8c-6.6 0-11.9.2-11.9.4zM167.5 125.2c-.8 3.4-15.5 96.7-15.5 98.4 0 1.1 2.1 1.4 10.9 1.4h10.8l2.3-14.8c6-38.7 5.3-35.5 9-37.9 4.2-2.9 11.9-3.2 14.3-.5 2.4 2.6 2.2 6.2-1.8 30.6-1.9 11.9-3.5 21.8-3.5 22.1 0 .3 4.9.5 10.9.5h10.9l.6-2.7c.9-4.4 6.4-40.2 7.1-46.3.8-6.5-.8-14.2-3.6-18.2-3.3-4.6-7.4-6.2-16.4-6.3-6.6 0-9 .5-13.5 2.6l-5.6 2.6 2.3-14.1c1.2-7.8 2.5-15.3 2.7-16.9l.6-2.7h-11c-10.5 0-11 .1-11.5 2.2zM713.5 125c-8.2 2.5-12.2 12.3-7.5 18.3 4.1 5.2 14.5 4.4 19.4-1.4 3.5-4.1 3.7-11.6.4-14.6-2.7-2.5-8.2-3.5-12.3-2.3zM37.8 128.9C25 133 16.4 140.8 13.6 150.8c-.9 3.2-1.6 6.7-1.6 7.8 0 7.1 5.6 15.3 13.6 20 2.4 1.4 8.7 4.1 14 6 16.1 5.7 19.1 8.5 16.1 15.6-2.1 5.1-7.1 7.1-16.3 6.6-6.5-.3-7.7-.7-10.1-3.1-2.2-2.1-2.8-3.6-2.8-7.2V192H15.4c-12.3 0-12.4.1-12.4 6.4 0 10.6 7 20.5 17.6 24.7 5.1 2 7.5 2.3 18.4 2.3 13.9-.1 20.7-1.8 28.1-7.2C80.9 208 83.8 188.8 73 178c-4.6-4.6-8.5-6.7-20.2-10.9-11.3-3.9-14.4-5.6-16.4-8.6-1.4-2.1-1.4-3-.4-5.4 1.8-4.4 4.1-6 10.3-7.2 10-2 16.7 2.1 16.7 10.1v3h23v-5.1c0-8.1-1.9-12.8-7.5-18.6-3.8-3.9-6.3-5.5-10.4-6.7-7.5-2.2-22.9-2-30.3.3zM116.4 152c-14.8 3.1-26.3 15.8-30 32.8-2.9 14-1.1 25.3 5.4 32.4 4.8 5.3 10.6 7.8 19.6 8.5 18.3 1.4 34-9.3 38-26l.6-2.7h-20.5l-1.5 3.2c-2.2 4.7-6.4 7.3-11.5 7.3-8.7 0-11.3-7.2-8-22.2 1.5-6.5 2.4-8.4 5.5-11.5 3.2-3.3 4.4-3.8 8.3-3.8 5.9 0 8.7 2.3 9.4 7.8l.6 4.2h9.7c10.7 0 11-.2 11-6.4 0-9.1-5.2-17.6-13.2-21.7-4.5-2.3-17-3.3-23.4-1.9zM259.2 152c-6.5 1.4-15.9 6.9-20.3 11.8-9.8 11.2-14.3 29.7-10.4 42.9 3.3 11.2 11.8 17.8 24.7 19 22.1 2 39.1-10.8 44.4-33.4 2-8.4 1.4-19.4-1.4-25.5-2.6-5.6-8.6-11.3-14.2-13.3-5.5-2-17-2.7-22.8-1.5zm14.3 20.4c1.3 1.3 2.7 4.1 3.1 6.2.9 4.6-1 15.4-3.6 20.5-5.3 10.3-18.7 11.6-22.7 2.1-3.1-7.4.6-22 6.9-27.8 3.3-2.9 4.5-3.4 8.8-3.4 4 0 5.6.5 7.5 2.4zM334.7 152c-9.9 2.5-19.7 10.1-25.1 19.2-3.2 5.5-6.6 18.4-6.6 25.3 0 12.1 6 22 16.3 26.6 4.3 2 6.8 2.4 15.2 2.4 12.7 0 20.4-2.6 27.6-9.4l4.9-4.6-4.6-6.1-4.7-6.2-4.4 3.4c-7 5.3-16.1 6.7-22.5 3.3-2.1-1.1-5.8-6.6-5.8-8.7 0-.9 5.2-1.2 22.9-1.2h22.9l1.1-9.3c2-16.2-1.6-26.3-11.6-31.9-4.2-2.4-6.6-3-13.5-3.3-4.5-.2-10 0-12.1.5zm14.1 20c1.3 1.2 2.2 3.3 2.2 5v3h-23.1l1.8-3.1c2.5-4.4 6.9-6.9 12.4-6.9 3.2 0 5.2.6 6.7 2zM414.8 152.3c-2 .8-5.3 2.4-7.2 3.5l-3.6 2.1v-2.4c0-2.5 0-2.5-10.3-2.5h-10.2l-5.4 33.7c-2.9 18.6-5.5 34.8-5.8 36-.5 2.3-.4 2.3 10.6 2.3 10.7 0 11.1-.1 11.6-2.3.2-1.2 2-12.3 3.9-24.6 2-12.2 4.1-23 4.7-23.8 3.7-4.4 14.2-5.9 17.2-2.5 2.3 2.5 2.2 2.8-1.8 27.6-1.9 11.9-3.5 22.5-3.5 23.6 0 1.9.7 2 10.5 2 7.6 0 10.7-.4 11-1.3 1.4-3.9 7.5-46.8 7.5-52.5 0-8.7-2.8-14.6-8.4-17.5-4.8-2.5-15.8-3.2-20.8-1.4zM479.3 152c-10.1 2.1-20.9 10.9-26.2 21.3-9.1 17.9-6.9 38.1 5.1 46.8 10 7.1 27.9 7.9 40.3 1.6 4.4-2.2 12.5-8.5 12.5-9.7 0-.4-2-3.6-4.5-6.9l-4.6-6.2-4.1 3.5c-5.3 4.6-13 6.5-18.9 4.7-5.1-1.5-8.9-5.2-8.9-8.6V196h44.8l1.1-6.3c3.2-18.3-1.4-30.9-12.9-35.9-5.1-2.3-17.3-3.2-23.7-1.8zm14.2 20.5c1.4 1.3 2.5 3.6 2.5 5v2.5h-11.5c-7.8 0-11.5-.4-11.5-1.1 0-.6 1.7-2.9 3.9-5 3.5-3.5 4.4-3.9 9-3.9 4.2 0 5.7.5 7.6 2.5zM652 152.5c-18.8 5.3-30.9 24.2-29.8 46.4.4 8.7 2.4 13.7 7.6 18.9 11.7 11.6 37.3 10.7 51.7-1.9 1.9-1.7 3.5-3.6 3.5-4.2 0-.8-1.8-3.5-8.5-12.5-.2-.2-1.6.9-3.1 2.3-4.5 4.2-8.4 5.8-14.4 5.9-6.8.1-11.1-1.6-13.3-5.3-3.6-6.2-4-6.1 20.7-6.1 20.4 0 22.4-.2 23.1-1.8 1.4-3.6 1.8-21.1.5-25.7-1.6-5.8-7.8-12.8-13.2-15-6-2.4-18-2.9-24.8-1zm15.5 20c1.4 1.3 2.5 3.6 2.5 5v2.5h-11.5c-7.8 0-11.5-.4-11.5-1.1 0-.6 1.7-2.9 3.9-5 3.5-3.5 4.4-3.9 9-3.9 4.2 0 5.7.5 7.6 2.5zM751.2 152.5c-7.1 2-10 3.6-14.6 8.1-4.9 4.7-7.5 10.6-7.6 16.5 0 8.9 7.2 15.3 21.3 18.9 10.3 2.6 13.1 4 13.5 6.8.7 4.8-5.5 7.7-13 6.1-4.9-1.1-6.8-3.1-6.8-7.1V199h-10.4c-11.8 0-12.1.2-11 7.7 1.6 10.8 10.9 18.1 24.4 19.1 21.5 1.5 39-9.8 39-25.2 0-5.8-1.1-8.5-5-12.3-3.6-3.5-8-5.3-20-8.3-9.1-2.2-11.4-3.8-10.1-7.3 1-2.8 4.7-4.7 9.1-4.7 4.9 0 8 2.4 8 6.1v2.9h21v-6c0-12.8-7.3-18.6-24.5-19.6-5.3-.3-9.8.1-13.3 1.1zM526 155c0 2.2 5.6 57.8 6.6 65.3l.6 4.7h9.1l9.2-.1 9-19.9c4.9-10.9 9.3-19.6 9.6-19.2.4.4 1.6 8.1 2.8 17.2 1.2 9.1 2.4 17.8 2.7 19.3l.6 2.8 9.1-.3 9.2-.3 14.7-35c8.2-19.2 14.8-35.3 14.8-35.7 0-.5-4.8-.7-10.7-.6l-10.6.3-7.1 19.2c-3.8 10.6-7.1 19.1-7.2 19-.1-.1-1.2-7.9-2.3-17.2-1.2-9.4-2.4-18-2.7-19.3-.4-2.1-.9-2.2-8.7-2.2h-8.2l-8.5 19.2-8.5 19.2-.7-5c-.3-2.7-.7-8.5-.7-13-.1-4.5-.4-10.9-.7-14.3l-.7-6.1h-10.3c-9.7 0-10.4.1-10.4 2zM697.1 186.7c-2.9 18.6-5.5 34.8-5.8 36-.5 2.3-.4 2.3 10.5 2.3h11l.6-2.8c1.1-5.3 10.6-65.6 10.6-67.4 0-1.6-1-1.8-10.8-1.8h-10.8l-5.3 33.7z"></path></svg><style data-emotion-css="10l5b14">.css-10l5b14{position:absolute;display:inline-block;opacity:0;width:0px;height:0px;visibility:hidden;overflow:hidden;}</style><span class="css-10l5b14 e1q3p6rm8">Navigate back to the homepage</span></a><style data-emotion-css="1qdrnpx">.css-1qdrnpx{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:33.75em){.css-1qdrnpx{right:-5px;}}</style><div class="css-1qdrnpx e1q3p6rm3"><style data-emotion-css="4zc6l3">.css-4zc6l3{opacity:0.5;position:relative;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;margin-left:30px;}.css-4zc6l3:hover{opacity:1;}.css-4zc6l3[data-a11y="true"]:focus::after{content:"";position:absolute;left:0;top:-30%;width:100%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}@media (max-width:45.9375em){.css-4zc6l3{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-transform:scale(0.708);-ms-transform:scale(0.708);transform:scale(0.708);margin-left:10px;}.css-4zc6l3:hover{opacity:0.5;}}</style><button data-a11y="false" aria-label="Copy URL to clipboard" title="Copy URL to clipboard" class="css-4zc6l3 e1q3p6rm5"><svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2H14C15.6567 2 17 3.34328 17 5V9C17 10.6567 15.6567 12 14 12H10C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14H14C16.7613 14 19 11.7613 19 9V5C19 2.23872 16.7613 0 14 0H5C2.23872 0 0 2.23872 0 5V9C0 10.4938 0.656313 11.8361 1.6935 12.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625C3.47028 12.2483 3.43068 11.6164 3.0165 11.2511C2.39169 10.6999 2 9.89621 2 9V5ZM7 11C7 9.34328 8.34328 8 10 8H14C14.5523 8 15 7.55228 15 7C15 6.44772 14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11V15C5 17.7613 7.23872 20 10 20H19C21.7613 20 24 17.7613 24 15V11C24 9.50621 23.3437 8.16393 22.3065 7.24906C21.8923 6.88372 21.2604 6.92332 20.8951 7.3375C20.5297 7.75168 20.5693 8.38361 20.9835 8.74894C21.6083 9.30007 22 10.1038 22 11V15C22 16.6567 20.6567 18 19 18H10C8.34328 18 7 16.6567 7 15V11Z" fill="#000"></path></svg><style data-emotion-css="16kvgc5">.css-16kvgc5{position:absolute;padding:4px 13px;background:rgba(0,0,0,0.1);color:#000;border-radius:5px;font-size:14px;top:-35px;opacity:0;-webkit-transform:none;-ms-transform:none;transform:none;-webkit-transition:-webkit-transform 0.3s ease-in-out,opacity 0.3s ease-in-out;-webkit-transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;}.css-16kvgc5::after{content:"";position:absolute;left:0;right:0;bottom:-6px;margin:0 auto;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid rgba(0,0,0,0.1);}</style><div class="css-16kvgc5 e1q3p6rm4">Copied</div></button><button data-a11y="false" aria-label="Activate dark mode" title="Activate dark mode" class="css-4zc6l3 e1q3p6rm5"><style data-emotion-css="jmdf3f">.css-jmdf3f{position:relative;width:24px;height:24px;border-radius:50%;border:2px solid var(--theme-ui-colors-primary,#000);background:var(--theme-ui-colors-primary,#000);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:all 0.45s ease;transition:all 0.45s ease;overflow:hidden;}.css-jmdf3f::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-primary,#000);border-radius:50%;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease;-webkit-transition:transform 0.45s ease;transition:transform 0.45s ease;}.css-jmdf3f::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-primary,#000),0 23px 0 var(--theme-ui-colors-primary,#000),23px 0 0 var(--theme-ui-colors-primary,#000),-23px 0 0 var(--theme-ui-colors-primary,#000),15px 15px 0 var(--theme-ui-colors-primary,#000),-15px 15px 0 var(--theme-ui-colors-primary,#000),15px -15px 0 var(--theme-ui-colors-primary,#000),-15px -15px 0 var(--theme-ui-colors-primary,#000);-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transition:all 0.35s ease;transition:all 0.35s ease;}@media (max-width:45.9375em){.css-jmdf3f::after{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}}</style><div class="css-jmdf3f e1q3p6rm6"></div><style data-emotion-css="1k5uyy5">.css-1k5uyy5{position:absolute;right:-1px;top:-8px;height:24px;width:24px;border-radius:50%;border:0;background:var(--theme-ui-colors-background,#fafafa);-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),-webkit-transform 0.45s ease;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),transform 0.45s ease;transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad),transform 0.45s ease;}</style><div class="css-1k5uyy5 e1q3p6rm7"></div></button></div></div></section><style data-emotion-css="wn0kt9">@media (max-width:33.75em){.css-wn0kt9::before{content:"";width:100%;height:20px;background:var(--theme-ui-colors-primary,#000);position:absolute;left:0;top:0;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}.css-wn0kt9::after{content:"";width:100%;height:10px;background:var(--theme-ui-colors-background,#fafafa);position:absolute;left:0;top:10px;border-top-left-radius:25px;border-top-right-radius:25px;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}}</style><div class="css-wn0kt9 e1oyruom0"><style data-emotion-css="1ito37z">.css-1ito37z{position:relative;z-index:10;margin:100px auto 120px;padding-left:68px;max-width:749px;}@media (max-width:66.875em){.css-1ito37z{padding-left:53px;max-width:calc(507px + 53px);margin:100px auto 70px;}}@media (max-width:45.9375em){.css-1ito37z{padding-left:0;margin:100px auto 70px;max-width:480px;}}@media (max-width:33.75em){.css-1ito37z{margin:170px auto 180px;padding:0 40px;}}@media screen and (max-height:700px){.css-1ito37z{margin:100px auto;}}</style><header class="css-1ito37z e1oyruom2"><style data-emotion-css="1fu6lzh">.css-1fu6lzh{word-break:keep-all;font-size:52px;line-height:1.15;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;font-size:48px;font-family:'Merriweather',Georgia,Serif;margin-bottom:25px;font-weight:bold;line-height:1.32;}@media (max-width:66.875em){.css-1fu6lzh{font-size:38px;line-height:1.2;}}@media (max-width:33.75em){.css-1fu6lzh{font-size:32px;line-height:1.3;}}@media (max-width:45.9375em){.css-1fu6lzh{margin-bottom:20px;font-size:36px;}}@media (max-width:33.75em){.css-1fu6lzh{font-size:32px;}}</style><h1 class="css-1fu6lzh e1oyruom3">Converting HTML to a PDF using Python, AWS Lambda, and wkhtmltopdf</h1><style data-emotion-css="sdvpri">.css-sdvpri{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:18px;color:var(--theme-ui-colors-grey,#73737D);}@media (max-width:33.75em){.css-sdvpri{font-size:14px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-sdvpri strong{display:block;font-weight:500;margin-bottom:5px;}}</style><div class="css-sdvpri e1oyruom4"><style data-emotion-css="1mpu0fb">.css-1mpu0fb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;}.css-1mpu0fb strong{-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}.css-1mpu0fb:hover strong{color:var(--theme-ui-colors-primary,#000);}</style><a class="css-1mpu0fb e6hdldi2" href="/authors/bradley-schoeneweis"><style data-emotion-css="u1pf06">.css-u1pf06{height:25px;width:25px;border-radius:50%;margin-right:14px;background:var(--theme-ui-colors-grey,#73737D);overflow:hidden;}.css-u1pf06 .gatsby-image-wrapper > div{padding-bottom:100% !important;}@media (max-width:33.75em){.css-u1pf06{display:none;}}</style><div class="css-u1pf06 e6hdldi0"><style data-emotion-css="uodor8">.css-uodor8{border-radius:50%;}</style><style data-emotion-css="1qspsgn">.css-1qspsgn{border-radius:50%;}.css-1qspsgn > img{-webkit-filter:blur(8px);filter:blur(8px);}</style><div class="e6hdldi1 css-1qspsgn e13158qv0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFMUlEQVQ4y3WSa0yTVxjH3+/7tixb5rjIzZhdUTevY6iRObZky5iLbpKJoiMqCgylBREoQqGFWm7l1lLQOihtXwrlVkpvVkoFEXAqMpFppplZ3LIP+6Sb/PaOLNmybCf55eQ8T57//znPOcLS0hJP/2LpH/z3+ndu6S/+Pgn8X+nTpxK/8+S333j0y6/MzP/A+Mxdxq/eZer6fULT9whcWSQweYd7D37i8eMny5LCvfuPpMAj5hcfcm3uAXMLD5m99QD/xCK+qXt4QosMum9itgVxeObo8S1gcd3ENnoLq2sO68hN7KM3cQdvE5z6DsEyfB3z8A3MTinpmkf03KbXv8DA2F3EbhcZu9NI2pDAu29uorm0DN+EFA98h+i/s4zVu4BVqrG5v6Vz6AZCwwU/dRJNljHaHRNcGJriwsgs/a4pcj//jC0xMby3Zh3x4RG89uwzGKo0uK8+YHB8kd7AAjbv/DJW9xyidw7hRFkbJ5VG5Ko2CqvbUTebae0apEpRgWxvGtO2fmYlQh0XqDiayYndKTico4hOD939LoyWfozdvVj6hhh2+xCajT0YjCIGg4WOcyI26yAWq5Oc9Aw6FGUs+i4zZe5jRop/PzHDuFmP2dSNTm+nVappbeukvqmdZr2RhiYjQru+ElNHlSTUgr2nBUe/kW67nsJjB+nR1JD30SdoUvdRn5bO6dQ07o72IerbOFXTSEWtRkKNul5LeY2ak6UyBLM+G2XJHprqj1JbnY6pPZve3iIGquTcEPsJ1Bvxq+qYNnYSajHx83gIp6UGw0A12s4Sqs8VU1KfR0lNPrKSXITzbVlkZydTodyH6bycUkUqNrEYS0ch1612LpWpcBYU4ypSYj+Ww+yQFbNYTl+vEqu9EtdIM2KvBlufBrujAcE7osY9pMRmLpJmmUeV9ijdJhlfm44w2K7iorIUb5mWoFrPFaMRR5cSVcMhKqozUCgPcLp0L3n5e9C15PC1WIhw0VvNqLOSYEDH5GUDl0N6xjxark4YuBZy4NFpCeh0+LV13L8SYDxkprEtm9IKSexMGjWNRyhXpSPL30V+8ScIfVYZvdZC3M5yhofKGBmuJnhRzzfXOmnUdzHW2kznqSzsVUXM+z04B+1MX9UT8DdI161DFJU0tebQoDssiaYgWM+nI3Zl4hwoYLC/ANfAVwS9CgbcZhL26zj1lZbbA05+nLxCUHqkTHkD9dZhPD4DN2b0hHzl0rjk9PWcQrTKEcY8CvzOIlyOfCYDJfh8VeRWaoj/tJHY99WEvXWAz3bn4KiVPv2RXFZvyyTuYwOJ+1vIKG5hwGNmfrqZ6aCOca8GYTbYzvWJc3idWhTNJjbub2fFVjXR7yqJS1YRl1RE2NrPObRHxqcfZbFycyYvp0hmH5zlhU2n2fiFkbOmfqYuGbg0UoEwOWok4NJwQtNFxM46IrcqiEqUE7vjDLHJamKTlIRvzCJ6w5es2nmGmB0lxCQVs3JbEREJBaxYn0N08lkUGj193ScQhm15FKvkRCeWELkxk8hNWURsziVKEop7TyUVlxPxThFxW/NZv0tD1PZiIhMLWLkll5fePLxs9twrqaxNOk5tZQZC5/njbPnwGC++to+I+L2Ev7GPyM2S67ZCorefkTqRjBJPE7EpV+pWwcrE/OVcZEIeK9YckOKZPL86hajXU2iqUSCcPHmAqHUHCYvbQfiruwiPTyXybZnUcR7RCTKpE7l0tULC1h8n5p08wjfLpJH8uWezYu0hwtalE7lmLy+ueh9901n+AAXzStBdfTHfAAAAAElFTkSuQmCC" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/30258132bc94add22e4689384fd0f922/58718/bradley-schoeneweis.webp 13w,
/static/30258132bc94add22e4689384fd0f922/74aad/bradley-schoeneweis.webp 25w,
/static/30258132bc94add22e4689384fd0f922/e7b2c/bradley-schoeneweis.webp 50w,
/static/30258132bc94add22e4689384fd0f922/ed320/bradley-schoeneweis.webp 75w,
/static/30258132bc94add22e4689384fd0f922/66016/bradley-schoeneweis.webp 100w,
/static/30258132bc94add22e4689384fd0f922/c670f/bradley-schoeneweis.webp 2455w" sizes="(max-width: 50px) 100vw, 50px" /><source srcset="/static/30258132bc94add22e4689384fd0f922/d406d/bradley-schoeneweis.png 13w,
/static/30258132bc94add22e4689384fd0f922/12717/bradley-schoeneweis.png 25w,
/static/30258132bc94add22e4689384fd0f922/02603/bradley-schoeneweis.png 50w,
/static/30258132bc94add22e4689384fd0f922/5acf8/bradley-schoeneweis.png 75w,
/static/30258132bc94add22e4689384fd0f922/3ba9f/bradley-schoeneweis.png 100w,
/static/30258132bc94add22e4689384fd0f922/5e3c9/bradley-schoeneweis.png 2455w" sizes="(max-width: 50px) 100vw, 50px" /><img loading="lazy" sizes="(max-width: 50px) 100vw, 50px" srcset="/static/30258132bc94add22e4689384fd0f922/d406d/bradley-schoeneweis.png 13w,
/static/30258132bc94add22e4689384fd0f922/12717/bradley-schoeneweis.png 25w,
/static/30258132bc94add22e4689384fd0f922/02603/bradley-schoeneweis.png 50w,
/static/30258132bc94add22e4689384fd0f922/5acf8/bradley-schoeneweis.png 75w,
/static/30258132bc94add22e4689384fd0f922/3ba9f/bradley-schoeneweis.png 100w,
/static/30258132bc94add22e4689384fd0f922/5e3c9/bradley-schoeneweis.png 2455w" src="/static/30258132bc94add22e4689384fd0f922/02603/bradley-schoeneweis.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><strong>Bradley Schoeneweis</strong><style data-emotion-css="n3ef8t">@media (max-width:33.75em){.css-n3ef8t{display:none;}}</style><span class="css-n3ef8t e6hdldi13">, </span></a><style data-emotion-css="1d64qrg">.css-1d64qrg{margin-left:0;}@media (max-width:33.75em){.css-1d64qrg{margin-left:0;}}</style><div class="css-1d64qrg e1oyruom1">April 29th, 2021<!-- --> · <!-- -->6<!-- --> min read</div></div></header><style data-emotion-css="15rikwz">.css-15rikwz{position:relative;z-index:1;width:100%;max-width:944px;overflow:hidden;margin:0 auto;box-shadow:0 30px 60px -10px rgba(0,0,0,0.2),0 18px 36px -18px rgba(0,0,0,0.22);}@media (max-width:45.9375em){.css-15rikwz{max-width:100%;}}@media (max-width:33.75em){.css-15rikwz{margin:0 auto;width:calc(100vw - 40px);height:220px;}.css-15rikwz > div{height:220px;}}</style><div id="ArticleImage__Hero" class="css-15rikwz e1oyruom5"><style data-emotion-css="133qvua">.css-133qvua > img{-webkit-filter:blur(8px);filter:blur(8px);}</style><div class="css-133qvua e13158qv0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:37.71186440677966%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAc2QVg//xAAXEAADAQAAAAAAAAAAAAAAAAAQESEi/9oACAEBAAEFAosj/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAABBB/9oACAEBAAY/Air/xAAbEAACAQUAAAAAAAAAAAAAAAABEUEAECExof/aAAgBAQABPyEZG3FbGC7b/9oADAMBAAIAAwAAABADz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAAEEAwAAAAAAAAAAAAAAABEAMWFxECGh/9oACAEBAAE/EKE6NJXJWNox/9k=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/2e9f00a9af04ea030c46b243cc917427/77392/hero.webp 236w,
/static/2e9f00a9af04ea030c46b243cc917427/1f177/hero.webp 472w,
/static/2e9f00a9af04ea030c46b243cc917427/99fbb/hero.webp 944w,
/static/2e9f00a9af04ea030c46b243cc917427/9000d/hero.webp 1200w" sizes="(max-width: 944px) 100vw, 944px" /><source srcset="/static/2e9f00a9af04ea030c46b243cc917427/e0f30/hero.jpg 236w,
/static/2e9f00a9af04ea030c46b243cc917427/86afd/hero.jpg 472w,
/static/2e9f00a9af04ea030c46b243cc917427/58fe7/hero.jpg 944w,
/static/2e9f00a9af04ea030c46b243cc917427/0ff54/hero.jpg 1200w" sizes="(max-width: 944px) 100vw, 944px" /><img loading="lazy" sizes="(max-width: 944px) 100vw, 944px" srcset="/static/2e9f00a9af04ea030c46b243cc917427/e0f30/hero.jpg 236w,
/static/2e9f00a9af04ea030c46b243cc917427/86afd/hero.jpg 472w,
/static/2e9f00a9af04ea030c46b243cc917427/58fe7/hero.jpg 944w,
/static/2e9f00a9af04ea030c46b243cc917427/0ff54/hero.jpg 1200w" src="/static/2e9f00a9af04ea030c46b243cc917427/58fe7/hero.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></div><style data-emotion-css="145b7r6">.css-145b7r6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 auto;max-width:1140px;}@media (max-width:80em){.css-145b7r6{display:none;}}</style><aside class="css-145b7r6 eb5z70c0"><style data-emotion-css="18dj233">.css-18dj233{position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);top:0px;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;height:100vh;z-index:3;opacity:0;visibility:hidden;-webkit-transition:opacity 0.2s linear,visibility 0.4s linear;transition:opacity 0.2s linear,visibility 0.4s linear;}</style><div class="css-18dj233 eb5z70c1"><div><style data-emotion-css="155spwp">.css-155spwp{-webkit-user-select:initial;-moz-user-select:initial;-ms-user-select:initial;user-select:initial;pointer-events:initial;opacity:1;-webkit-transition:opacity 0.25s;transition:opacity 0.25s;}</style><div class="css-155spwp e1fnsvio0"><style data-emotion-css="1elne8e">.css-1elne8e{position:relative;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><div tabindex="-1" class="css-1elne8e ewxdfzj0"><style data-emotion-css="iefrkk">.css-iefrkk{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:calc(88vh - 40px);max-height:425px;width:1px;background-color:var(--theme-ui-colors-track,rgba(8,8,11,0.3));opacity:0.6;overflow:hidden;}</style><div aria-hidden="true" class="css-iefrkk ewxdfzj1"><style data-emotion-css="1qno6mr">.css-1qno6mr{position:absolute;height:100%;top:-100%;width:1px;background-color:var(--theme-ui-colors-progress,#000);left:0;}</style><div style="transform:translateY(0%)" class="css-1qno6mr ewxdfzj2"></div></div></div></div></div></div></aside><style data-emotion-css="19mic43">.css-19mic43{position:relative;padding-top:60px;-webkit-transition:background 0.2s linear;transition:background 0.2s linear;text-align:center;}@media (min-width:33.8125em){.css-19mic43{display:none;}}</style><div class="css-19mic43 eih7p4r0"><style data-emotion-css="gmuwbf">.css-gmuwbf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><div class="css-gmuwbf e1d5uww60"><style data-emotion-css="1yxfb37">.css-1yxfb37{opacity:0.5;position:relative;z-index:200000000;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;margin-left:30px;}.css-1yxfb37:hover{opacity:1;}@media (max-width:45.9375em){.css-1yxfb37{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-transform:scale(0.9);-ms-transform:scale(0.9);transform:scale(0.9);margin:0 15px;}.css-1yxfb37:hover{opacity:0.5;}}</style><button data-a11y="false" aria-label="Copy URL to clipboard" class="css-1yxfb37 e1d5uww62"><svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2H14C15.6567 2 17 3.34328 17 5V9C17 10.6567 15.6567 12 14 12H10C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14H14C16.7613 14 19 11.7613 19 9V5C19 2.23872 16.7613 0 14 0H5C2.23872 0 0 2.23872 0 5V9C0 10.4938 0.656313 11.8361 1.6935 12.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625C3.47028 12.2483 3.43068 11.6164 3.0165 11.2511C2.39169 10.6999 2 9.89621 2 9V5ZM7 11C7 9.34328 8.34328 8 10 8H14C14.5523 8 15 7.55228 15 7C15 6.44772 14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11V15C5 17.7613 7.23872 20 10 20H19C21.7613 20 24 17.7613 24 15V11C24 9.50621 23.3437 8.16393 22.3065 7.24906C21.8923 6.88372 21.2604 6.92332 20.8951 7.3375C20.5297 7.75168 20.5693 8.38361 20.9835 8.74894C21.6083 9.30007 22 10.1038 22 11V15C22 16.6567 20.6567 18 19 18H10C8.34328 18 7 16.6567 7 15V11Z" fill="black"></path></svg><div class="css-16kvgc5 e1d5uww61">Copied</div></button><button aria-label="Toggle dark and light mode" class="css-1yxfb37 e1d5uww62"><div class="css-jmdf3f e1d5uww63"></div><style data-emotion-css="mslqme">.css-mslqme{position:absolute;right:-1px;top:-8px;height:24px;width:24px;border-radius:50%;border:0;background:var(--theme-ui-colors-background,#fafafa);-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);-webkit-transition:transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:transform 0.45s ease,background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}</style><div class="css-mslqme e1d5uww64"></div></button></div></div><style data-emotion-css="1j2ibf0">.css-1j2ibf0{position:relative;padding:160px 0 35px;padding-left:68px;-webkit-transition:background 0.2s linear;transition:background 0.2s linear;}@media (max-width:66.875em){.css-1j2ibf0{padding-left:53px;}}@media (max-width:45.9375em){.css-1j2ibf0{padding:70px 0 80px;}}@media (max-width:33.75em){.css-1j2ibf0{padding:60px 0;}}</style><article class="css-1j2ibf0 eih7p4r1"><style data-emotion-css="rb52af">.css-rb52af{position:relative;z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{margin:0 auto;}.css-rb52af h1,.css-rb52af h1 *,.css-rb52af h2,.css-rb52af h2 *{margin:25px auto 18px;}@media (max-width:45.9375em){.css-rb52af h1,.css-rb52af h1 *,.css-rb52af h2,.css-rb52af h2 *{margin:30px auto 18px;}}.css-rb52af h3,.css-rb52af h3 *{margin:20px auto 10px;}.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{width:100%;max-width:680px;}@media (max-width:66.875em){.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{max-width:507px;}}@media (max-width:45.9375em){.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{max-width:486px;}}@media (max-width:33.75em){.css-rb52af h1,.css-rb52af h2,.css-rb52af h3,.css-rb52af h4,.css-rb52af h5,.css-rb52af h6{padding:0 20px;}}.css-rb52af .prism-code{overflow:auto;width:100%;max-width:744px;margin:0 auto;padding:32px;font-size:13px;margin:15px auto 50px;border-radius:5px;font-family:"Operator Mono",Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;background:var(--theme-ui-colors-prism-background,#292c34);}.css-rb52af .prism-code .token-line{border-left:3px solid transparent;}.css-rb52af .prism-code .token-line .token{color:var(--theme-ui-colors-prism-token,#fff);}.css-rb52af .prism-code .token-line .language-javascript{color:var(--theme-ui-colors-prism-languageJavascript,#e8696b);}.css-rb52af .prism-code .token-line .javascript{color:var(--theme-ui-colors-prism-javascript,#e8696b);}.css-rb52af .prism-code .token-line .background{color:var(--theme-ui-colors-prism-background,#292c34);}.css-rb52af .prism-code .token-line .comment{color:var(--theme-ui-colors-prism-comment,#5e6a76);}.css-rb52af .prism-code .token-line .string{color:var(--theme-ui-colors-prism-string,#a8e2a8);}.css-rb52af .prism-code .token-line .var{color:var(--theme-ui-colors-prism-var,#b3bac5);}.css-rb52af .prism-code .token-line .number{color:var(--theme-ui-colors-prism-number,#e4854d);}.css-rb52af .prism-code .token-line .constant{color:var(--theme-ui-colors-prism-constant,#b3bac5);}.css-rb52af .prism-code .token-line .plain{color:var(--theme-ui-colors-prism-plain,#fff);}.css-rb52af .prism-code .token-line .doctype{color:var(--theme-ui-colors-prism-doctype,#e8696b);}.css-rb52af .prism-code .token-line .tag{color:var(--theme-ui-colors-prism-tag,#e8696b);}.css-rb52af .prism-code .token-line .keyword{color:var(--theme-ui-colors-prism-keyword,#d49fd4);}.css-rb52af .prism-code .token-line .boolean{color:var(--theme-ui-colors-prism-boolean,#ff5874);}.css-rb52af .prism-code .token-line .function{color:var(--theme-ui-colors-prism-function,#5F8DC3);}.css-rb52af .prism-code .token-line .parameter{color:var(--theme-ui-colors-prism-parameter,#F9965D);}.css-rb52af .prism-code .token-line .class-name{color:var(--theme-ui-colors-prism-className,#ffcf74);}.css-rb52af .prism-code .token-line .attr-name{color:var(--theme-ui-colors-prism-attrName,#bf87ba);}.css-rb52af .prism-code .token-line .attr-value{color:var(--theme-ui-colors-prism-attrValue,#a8e2a8);}.css-rb52af .prism-code .token-line .interpolation{color:var(--theme-ui-colors-prism-interpolation,#fff);}.css-rb52af .prism-code .token-line .punctuation{color:var(--theme-ui-colors-prism-punctuation,#5FA8AA);}.css-rb52af .prism-code .token-line .maybe-class-name{color:var(--theme-ui-colors-prism-maybe-class-name,#fff);}.css-rb52af .prism-code .token-line .property{color:var(--theme-ui-colors-prism-property,#80cbc4);}.css-rb52af .prism-code .token-line .property-access{color:var(--theme-ui-colors-prism-propertyAccess,#fff);}.css-rb52af .prism-code .token-line .namespace{color:var(--theme-ui-colors-prism-namespace,#b2ccd6);}.css-rb52af .prism-code .token-line .highlight{color:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));}.css-rb52af .prism-code .token-line .highlight-border{color:var(--theme-ui-colors-prism-highlightBorder,#e1bde2);}.css-rb52af .prism-code .token-line .dom{color:var(--theme-ui-colors-prism-dom,#5F8DC3);}.css-rb52af .prism-code .token-line .operator{color:var(--theme-ui-colors-prism-operator,#5FA8AA);}.css-rb52af .prism-code .number-line{display:inline-block;width:32px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;color:#dcd9e6;}@media (max-width:45.9375em){.css-rb52af .prism-code .number-line{opacity:0;width:0;}}.css-rb52af .prism-code .token-line.highlight-line{margin:0 -32px;padding:0 32px;background:var(--theme-ui-colors-prism-highlight,rgba(255,255,255,0.07));border-left:3px solid var(--theme-ui-colors-prism-highlightBorder,#e1bde2);}@media (max-width:45.9375em){.css-rb52af .prism-code .token-line.highlight-line{margin:0 -20px;padding:0 20px;}}.css-rb52af .prism-code .operator + .maybe-class-name{color:#ffcf74 !important;}.css-rb52af .prism-code .plain ~ .operator{color:#5fa8aa !important;}@media (max-width:66.875em){.css-rb52af .prism-code{left:-26px;}}@media (max-width:45.9375em){.css-rb52af .prism-code{max-width:526px;padding:20px 20px;left:0;}}@media (max-width:33.75em){.css-rb52af .prism-code{-webkit-text-size-adjust:none;text-size-adjust:none;border-radius:0;margin:0 auto 25px;padding:25px 20px;overflow:initial;width:unset;max-width:unset;float:left;min-width:100%;overflow:initial;position:relative;}}.css-rb52af .gatsby-resp-image-background-image{display:none !important;}.css-rb52af img{display:inline-block;position:relative;max-width:100%;height:auto;z-index:0;margin:15px auto 50px;border-radius:5px;}@media (max-width:45.9375em){.css-rb52af img{margin:10px auto 45px;}}.css-rb52af div.Image__Small{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;max-width:100%;height:auto;z-index:0;margin:15px auto 50px;border-radius:5px;width:100%;max-width:680px;}@media (max-width:45.9375em){.css-rb52af div.Image__Small{margin:10px auto 45px;}}@media (max-width:66.875em){.css-rb52af div.Image__Small{max-width:507px;}}@media (max-width:45.9375em){.css-rb52af div.Image__Small{max-width:486px;margin:0 auto 25px;}}@media (max-width:33.75em){.css-rb52af div.Image__Small{padding:0 20px;}}.css-rb52af .Image__Container{text-align:center;}.css-rb52af img.Image__With-Shadow{box-shadow:0px 15px 60px rgba(0,0,0,0.15);}.css-rb52af div.Image__Medium{position:relative;margin:15px auto 50px;width:100%;max-width:1004px;}@media (max-width:80em){.css-rb52af div.Image__Medium{left:-34px;}}@media (max-width:66.875em){.css-rb52af div.Image__Medium{left:-26px;}}@media (max-width:45.9375em){.css-rb52af div.Image__Medium{border-radius:0;left:0;margin:0 auto 25px;}.css-rb52af div.Image__Medium img{border-radius:0;}}.css-rb52af div.Image__Large{position:relative;left:-68px;width:100vw;margin:25px auto 60px;pointer-events:none;}.css-rb52af div.Image__Large iframe{pointer-events:all;}.css-rb52af div.Image__Large img{border-radius:0;}@media (max-width:66.875em){.css-rb52af div.Image__Large{left:-53px;}}@media (max-width:45.9375em){.css-rb52af div.Image__Large{left:0;margin:0 auto 25px;}}</style><div class="css-rb52af ellmdci0"><style data-emotion-css="fkwewv">.css-fkwewv{word-break:keep-all;font-size:32px;line-height:1.333;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;}@media (max-width:66.875em){.css-fkwewv{font-size:21px;}}@media (max-width:45.9375em){.css-fkwewv{font-size:24px;line-height:1.45;}}@media (max-width:33.75em){.css-fkwewv{font-size:22px;}}</style><h2 id="tldr" class="css-fkwewv e18lclmb1">tl;dr</h2><style data-emotion-css="8fj7fw">.css-8fj7fw{word-break:keep-all;font-size:24px;line-height:1.45;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;}@media (max-width:45.9375em){.css-8fj7fw{font-size:22px;}}@media (max-width:33.75em){.css-8fj7fw{font-size:20px;}}</style><h3 id="goal" class="css-8fj7fw e18lclmb2">Goal</h3><style data-emotion-css="8qp1bw">.css-8qp1bw{line-height:1.756;font-size:18px;color:var(--theme-ui-colors-articleText,#08080B);font-family:'SF Pro Display','-apple-system','BlinkMacSystemFont','San Francisco','Helvetica Neue','Helvetica','Ubuntu','Roboto','Noto','Segoe UI','Arial',sans-serif;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);margin:0 auto 35px;width:100%;max-width:680px;}.css-8qp1bw b{font-weight:800;}@media (max-width:66.875em){.css-8qp1bw{max-width:507px;}}@media (max-width:45.9375em){.css-8qp1bw{max-width:486px;margin:0 auto 25px;}}@media (max-width:33.75em){.css-8qp1bw{padding:0 20px;}}</style><p class="css-8qp1bw ezkq0ko0"><em class="css-0">To set up an easy to call HTML to PDF converter as an AWS Lambda function.</em></p><h3 id="process-overview" class="css-8fj7fw e18lclmb2">Process Overview</h3><style data-emotion-css="1smg95t">.css-1smg95t{list-style:none;counter-reset:list;color:var(--theme-ui-colors-articleText,#08080B);position:relative;padding:15px 0 30px 30px;margin:0 auto;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);font-size:18px;width:100%;max-width:680px;}@media (max-width:66.875em){.css-1smg95t{max-width:507px;}}@media (max-width:45.9375em){.css-1smg95t{max-width:486px;padding-left:0px;}}@media (max-width:33.75em){.css-1smg95t{padding-left:20px;}}.css-1smg95t li{position:relative;padding-bottom:15px;}@media (max-width:45.9375em){.css-1smg95t li{padding-left:30px;}}@media (max-width:33.75em){.css-1smg95t li{padding-left:30px;}}@media (max-width:45.9375em){.css-1smg95t li p{padding:0;}}.css-1smg95t li >:not(ol,ul){display:inline;}.css-1smg95t li::before{width:3rem;display:inline-block;position:absolute;color:var(--theme-ui-colors-articleText,#08080B);}.css-1smg95t li::before{counter-increment:list;content:counter(list) '.';font-weight:600;position:absolute;left:-3rem;top:-0.3rem;font-size:2rem;}@media (max-width:45.9375em){.css-1smg95t li::before{left:0;}}</style><ol class="css-1smg95t e37vq8s0"><li class="css-0"><strong class="css-0">Downloading the <code class="css-0">wkhtmltopdf</code> binary</strong></li><li class="css-0"><strong class="css-0">Creating the AWS Lambda layer(s) and configuring our function</strong></li><li class="css-0"><strong class="css-0">Writing the AWS Lambda function</strong><style data-emotion-css="1rpojxi">.css-1rpojxi{list-style:none;counter-reset:list;color:var(--theme-ui-colors-articleText,#08080B);position:relative;padding:15px 0 30px 30px;-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);margin:0 auto;font-size:18px;width:100%;max-width:680px;}@media (max-width:66.875em){.css-1rpojxi{max-width:507px;}}@media (max-width:45.9375em){.css-1rpojxi{max-width:486px;padding-left:0px;}}@media (max-width:33.75em){.css-1rpojxi{padding-left:20px;}}.css-1rpojxi li{position:relative;padding-bottom:15px;}@media (max-width:45.9375em){.css-1rpojxi li{padding-left:30px;}}@media (max-width:33.75em){.css-1rpojxi li{padding-left:30px;}}@media (max-width:45.9375em){.css-1rpojxi li p{padding:0;}}.css-1rpojxi li >:not(ol,ul){display:inline;}.css-1rpojxi li::before{width:3rem;display:inline-block;position:absolute;color:var(--theme-ui-colors-articleText,#08080B);}.css-1rpojxi li::before{content:'';position:absolute;left:-30px;top:8px;height:8px;width:8px;background:var(--theme-ui-colors-articleText,#08080B);}@media (max-width:45.9375em){.css-1rpojxi li::before{left:0;}}</style><ul class="css-1rpojxi eouu7a70"><li class="css-0">We will use Python’s <style data-emotion-css="mckguv">.css-mckguv{-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);color:var(--theme-ui-colors-accent,#6166DC);}.css-mckguv:visited{color:var(--theme-ui-colors-accent,#6166DC);opacity:0.85;}.css-mckguv:hover,.css-mckguv:focus{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://docs.python.org/3/library/subprocess.html" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0"><code class="css-0">subprocess</code> module</a> to call the <code class="css-0">wkhtmltopdf</code> command</li><li class="css-0">For more in-depth Python focused usage, also check out <a href="https://pypi.org/project/pdfkit/" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">pdfkit</a></li></ul></li></ol><h3 id="prerequisites" class="css-8fj7fw e18lclmb2">Prerequisites</h3><p class="css-8qp1bw ezkq0ko0">This article assumes access to an AWS account (free-tier is acceptable) and basic knowledge of AWS Lambda/S3 and Python.</p><h3 id="functional-requirements" class="css-8fj7fw e18lclmb2">Functional Requirements</h3><ol class="css-1smg95t e37vq8s0"><li class="css-0">Allow passing either an S3 file key or an HTML string</li><li class="css-0">Return a file key for the generated PDF</li><li class="css-0">Accept a small set of options for the <code class="css-0">wkhtmltopdf</code> command<ul class="css-1rpojxi eouu7a70"><li class="css-0">A full man page can be found <a href="https://wkhtmltopdf.org/usage/wkhtmltopdf.txt" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">here</a></li><li class="css-0">Most of the ones we’d want anyways are the default (i.e. <code class="css-0">--images</code>, <code class="css-0">--enable-external-links</code>, etc.)</li></ul></li></ol><p class="css-8qp1bw ezkq0ko0">Functionality for the following options</p><ul class="css-1rpojxi eouu7a70"><li class="css-0"><code class="css-0">--orientation &lt;orientation&gt;</code></li><li class="css-0"><code class="css-0">--title &lt;text&gt;</code></li><li class="css-0"><code class="css-0">--margin-bottom &lt;unitreal&gt;</code></li><li class="css-0"><code class="css-0">--margin-left &lt;unitreal&gt;</code></li><li class="css-0"><code class="css-0">--margin-right &lt;unitreal&gt;</code></li><li class="css-0"><code class="css-0">--margin-top &lt;unitreal&gt;</code></li></ul><h3 id="assumptions" class="css-8fj7fw e18lclmb2">Assumptions</h3><ol class="css-1smg95t e37vq8s0"><li class="css-0">The HTML string or file will be valid and will include the necessary tags (<code class="css-0">&lt;!DOCTYPE html&gt;</code>, <code class="css-0">&lt;html&gt;</code>, <code class="css-0">&lt;head&gt;</code>, <code class="css-0">&lt;body&gt;</code>). <strong class="css-0">It is very important that you check validity of this HTML prior to calling this function if you ever use something similar in production. It may be best to only accept S3 file keys instead of HTML strings, but this is simply to show our functions possibilities or be used as an internal tool.</strong></li><li class="css-0">The event payload will contain all valid values (S3 bucket name, file key, <code class="css-0">wkhtmltopdf</code> options etc.)</li></ol><h3 id="notes" class="css-8fj7fw e18lclmb2">Notes</h3><p class="css-8qp1bw ezkq0ko0">This article will use <code class="css-0">us-east-2</code> for the AWS region, changing this shouldn’t effect functionality, just the links within the article.</p><p class="css-8qp1bw ezkq0ko0">A better way to do this is through <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/what-is-sam.html" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">AWS Serverless Application Model (SAM)</a>, but this is more tailored for those looking for the basic setup through the AWS Management Console.</p><style data-emotion-css="xu77su">.css-xu77su{position:relative;width:100%;max-width:680px;margin:50px auto;border:0;height:14.36px;background-image:url("data:image/svg+xml,%3Csvg width='10' height='15' viewBox='0 0 10 15' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0.567383' y='14.1777' width='16' height='1' transform='rotate(-60 0.567383 14.1777)' fill='%232D2E33'/%3E%3C/svg%3E");background-repeat:repeat-x;box-sizing:border-box;background-position:center;}@media (max-width:66.875em){.css-xu77su{max-width:507px;}}@media (max-width:45.9375em){.css-xu77su{max-width:486px;}}@media (max-width:33.75em){.css-xu77su{padding:0 20px;}}@media (max-width:45.9375em){.css-xu77su{width:calc(100vw - 40px);margin:0px auto 50px;}}</style><hr class="css-xu77su e1yst2jy0"/><p class="css-8qp1bw ezkq0ko0">A common task I’ve found myself undertaking recently is programmatically converting an HTML file/string to an embedded and stylized PDF file.</p><p class="css-8qp1bw ezkq0ko0">An example use case for this might be exporting a self-managed customer invoice or generating a daily report from an existing HTML template. For those who have used template languages before, you can probably imagine the usefulness of a function like this in combination with <a href="https://jinja.palletsprojects.com/en/2.11.x/" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">Jinja</a> or template rendering engines commonly found in Web Frameworks (like <a href="https://www.djangoproject.com/" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">Django</a>).</p><p class="css-8qp1bw ezkq0ko0">After doing some research on third party libraries that could simplify our goal, I decided to use <a href="https://wkhtmltopdf.org/" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0"><code class="css-0">wkhtmltopdf</code></a>.</p><p class="css-8qp1bw ezkq0ko0"><code class="css-0">wkhtmltopdf</code> is an open-source command line tool that enables you to easy convert an HTML file to a PDF file. This is exactly what we’re looking for. We will call the <code class="css-0">wkhtmltopdf</code> command using the <a href="https://docs.python.org/3/library/subprocess.html" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0"><code class="css-0">subprocess</code></a> Python library. For more in-depth Python usage, you can check out <a href="https://pypi.org/project/pdfkit/" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">pdfkit</a>.</p><p class="css-8qp1bw ezkq0ko0">Let’s dive into it.</p><hr class="css-xu77su e1yst2jy0"/><h2 id="why-aws-lambda" class="css-fkwewv e18lclmb1">Why AWS Lambda?</h2><p class="css-8qp1bw ezkq0ko0"><a href="https://aws.amazon.com/lambda/" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">AWS Lambda</a> provides serverless computing functions where you don’t need to manage any servers or containers, you can simply call your function synchronously or asynchronously, and it will be executed and scaled automatically.</p><p class="css-8qp1bw ezkq0ko0">Lambda has a ton of use cases and is something I have personally used many times and am a big fan of.</p><p class="css-8qp1bw ezkq0ko0"><em class="css-0">For our goal, AWS Lambda is a powerful tool for the following reasons</em></p><ul class="css-1rpojxi eouu7a70"><li class="css-0">It allows us to offload processing away from the server<ul class="css-1rpojxi eouu7a70"><li class="css-0">This is more of a general benefit, we won’t actually be calling this function from a running server</li><li class="css-0">These calls will also be scaled automatically</li></ul></li><li class="css-0">Our dependencies, specifically the <code class="css-0">wkhtmltopdf</code> binary, can be handled well through <a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">AWS Lambda layers</a><ul class="css-1rpojxi eouu7a70"><li class="css-0">This helps to avoid dealing with different Linux distributions or multiple installation locations</li></ul></li></ul><p class="css-8qp1bw ezkq0ko0"><strong class="css-0">Below is an explanation of why handling the dependencies through layers will avoid issues. For continued instruction, you can skip to the next section.</strong></p><h3 id="issues-with-downloading-the-binary" class="css-8fj7fw e18lclmb2">Issues with downloading the binary</h3><p class="css-8qp1bw ezkq0ko0">When I was first using this library, I was also using <a href="https://pypi.org/project/pdfkit/" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0"><code class="css-0">pdfkit</code></a> to drive this interaction.  At the top of the installation instructions, you can see the following warning:</p><p style="background-color:orange;padding:7px 20px;text-align:center;border-radius:6px" class="css-8qp1bw ezkq0ko0"><i class="css-0">&quot;<b class="css-0">Warning!</b> Version in debian/ubuntu repos have reduced functionality (because it compiled without the wkhtmltopdf QT patches), such as adding outlines, headers, footers, TOC etc. To use this options you should install static binary from wkhtmltopdf site&quot;</i></p><p class="css-8qp1bw ezkq0ko0">When I first installed <code class="css-0">wkhtmltopdf</code>, I didn’t heed the warning and just ran the following:</p><div style="overflow:auto"><pre class="prism-code language-bash" style="position:relative"><style data-emotion-css="1chxjt6">.css-1chxjt6{position:absolute;right:22px;top:24px;padding:8px 12px 7px;border-radius:5px;color:#6f7177;-webkit-transition:background 0.3s ease;transition:background 0.3s ease;}.css-1chxjt6:hover{background:rgba(255,255,255,0.07);}.css-1chxjt6[data-a11y="true"]:focus::after{content:"";position:absolute;left:-2%;top:-2%;width:104%;height:104%;border:2px solid var(--theme-ui-colors-accent,#6166DC);border-radius:5px;background:rgba(255,255,255,0.01);}@media (max-width:45.9375em){.css-1chxjt6{display:none;}}</style><button data-a11y="false" class="css-1chxjt6 eu6xrih0">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token function">sudo</span><span class="token plain"> </span><span class="token function">apt-get</span><span class="token plain"> </span><span class="token function">install</span><span class="token plain"> wkhtmltopdf</span></div></pre></div><p class="css-8qp1bw ezkq0ko0">On initial inspection, I wasn’t experiencing the problems they mentioned (<em class="css-0">at least in my local environment</em>). The issues came when I actually pushed up code using this library to a staging environment and I noticed the PDFs were no longer generating.</p><p class="css-8qp1bw ezkq0ko0">I was able to remedy this by installing in an alternative way:</p><div style="overflow:auto"><pre class="prism-code language-bash" style="position:relative"><button data-a11y="false" class="css-1chxjt6 eu6xrih0">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token function">sudo</span><span class="token plain"> </span><span class="token function">apt-get</span><span class="token plain"> remove --purge wkhtmltopdf</span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token function">wget</span><span class="token plain"> https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6-1/wkhtmltox_0.12.6-1.bionic_amd64.deb</span></div><div class="token-line"><span class="number-line">3</span><span class="token plain"></span><span class="token function">sudo</span><span class="token plain"> dpkg -i wkhtmltox_0.12.6-1.bionic_amd64.deb</span></div><div class="token-line"><span class="number-line">4</span><span class="token plain"></span><span class="token function">rm</span><span class="token plain"> wkhtmltox_0.12.6-1.bionic_amd64.deb</span></div></pre></div><p class="css-8qp1bw ezkq0ko0">This isn’t a big deal, but managing this dependency could get tedious if your architecture has multiple servers that need installed with different Linux distributions.</p><p class="css-8qp1bw ezkq0ko0">Putting this binary into an AWS Lambda Layer can help solve this by having a single point of installation and management.</p><h2 id="downloading-the-wkhtmltopdf-binary" class="css-fkwewv e18lclmb1">Downloading the <code class="css-0">wkhtmltopdf</code> binary</h2><p class="css-8qp1bw ezkq0ko0">The <code class="css-0">wkhtmltopdf</code> site actually lists using this library with AWS Lambda as a <a href="https://wkhtmltopdf.org/downloads.html#how-do-i-use-it-in-aws-lambda" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">FAQ</a> and gives the following response to this question:</p><p class="css-8qp1bw ezkq0ko0"><em class="css-0">“All files required for lambda layer are packed in one zip archive (Amazon Linux 2 / lambda zip)”</em></p><p class="css-8qp1bw ezkq0ko0">You can download the binary on the releases page under the <a href="https://wkhtmltopdf.org/downloads.html#stable" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">Stable releases</a>. You’ll see an entry under <code class="css-0">Amazon Linux</code> with <code class="css-0">lambda zip</code> as the architecture.</p><p class="css-8qp1bw ezkq0ko0">Or, you can click <a href="https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6-4/wkhtmltox-0.12.6-4.amazonlinux2_lambda.zip" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">here</a> (I likely won’t update this link, so probably best to go directly to the release page).</p><p class="css-8qp1bw ezkq0ko0"><em class="css-0">Random note:</em> If you need more fonts for future usage, I’ve found that <a href="https://github.com/brandonlim-hs/fonts-aws-lambda-layer" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">this is a good resource</a>. You may need to include one of these fonts as a layer in your lambda function (via ARN) if your function has issues in the beginning.</p><h2 id="creating-the-aws-lambda-layers" class="css-fkwewv e18lclmb1">Creating the AWS Lambda layers</h2><p class="css-8qp1bw ezkq0ko0"><a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">AWS Lambda layers</a> allow us to add in “layers” of dependencies for our functions. An alternative to this is uploading your lambda function as a deployment package or using AWS SAM (Serverless Application Model), but that is out of the scope of this post.</p><h3 id="wkhtmltopdf" class="css-8fj7fw e18lclmb2"><code class="css-0">wkhtmltopdf</code></h3><p class="css-8qp1bw ezkq0ko0">Now that we have the zip file downloaded, let’s add our file as a layer in the <a href="https://us-east-2.console.aws.amazon.com/console/home?region=us-east-2" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">AWS Management Console</a>.</p><p class="css-8qp1bw ezkq0ko0">Go to the <a href="https://us-east-2.console.aws.amazon.com/lambda/home?region=us-east-2#/layers" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">Layers section</a> on the AWS Lambda page and click <code class="css-0">Create layer</code>.</p><p class="css-8qp1bw ezkq0ko0">Then, add the following Layer configuration.</p><div class="Image__Small css-0">
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1608px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:71.76616915422885%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3LmgD//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAAMBAQAAAAAAAAAAAAAAAAABERAx/9oACAEBAAE/IV3VClP/2gAMAwEAAgADAAAAEKMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQEBAAMAAAAAAAAAAAAAAREAMSFRYf/aAAgBAQABPxCReC++YjxHQwDdH3Rv/9k=&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/65a903dcbcd7c0a63deba148dba0743c/d0997/layer-configuration.webp 1608w" sizes="(max-width: 1608px) 100vw, 1608px" type="image/webp"/>
          <source srcSet="/static/65a903dcbcd7c0a63deba148dba0743c/161f6/layer-configuration.jpg 1608w" sizes="(max-width: 1608px) 100vw, 1608px" type="image/jpeg"/>
          <div data-rmiz-wrap="visible"><img class="Image__Zoom" src="/static/65a903dcbcd7c0a63deba148dba0743c/161f6/layer-configuration.jpg" alt="AWS Lambda layer configuration" style="display:block;margin:0 auto;width:100%;border-radius:0px"/><button aria-label="Zoom image" data-rmiz-btn-open="true" type="button"></button></div>
        </picture>
    </span></div><p class="css-8qp1bw ezkq0ko0">Notice that we don’t add a runtime here, this is intentional since our layer is a binary.</p><p class="css-8qp1bw ezkq0ko0">Click Create and take note of your new layer’s Version ARN as we are about to use it to add to our function.</p><p class="css-8qp1bw ezkq0ko0">Now we’re set up to create our function!</p><h2 id="writing-the-aws-lambda-function" class="css-fkwewv e18lclmb1">Writing the AWS Lambda function</h2><p class="css-8qp1bw ezkq0ko0">Navigate to the <a href="https://us-east-2.console.aws.amazon.com/lambda/home?region=us-east-2#/functions" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">Functions page</a> within the AWS Lambda service and click <code class="css-0">Create function</code>.</p><p class="css-8qp1bw ezkq0ko0">Select <code class="css-0">Author from scratch</code>, and add the following configuration.</p><div class="Image__Medium css-0">
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:3046px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:47.4%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2oZQg//8QAFRABAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQEAAQUCY//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABYQAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAQABPyEbi//aAAwDAQACAAMAAAAQMw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQMXFB/9oACAEBAAE/ECCtdgj6SybOwx//2Q==&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/271882959bdca2fbaf7ddd839ec09d2e/a3bc4/function-configuration.webp 2500w,/static/271882959bdca2fbaf7ddd839ec09d2e/62a36/function-configuration.webp 3046w" sizes="(max-width: 3046px) 100vw, 3046px" type="image/webp"/>
          <source srcSet="/static/271882959bdca2fbaf7ddd839ec09d2e/44ecf/function-configuration.jpg 2500w,/static/271882959bdca2fbaf7ddd839ec09d2e/c1e92/function-configuration.jpg 3046w" sizes="(max-width: 3046px) 100vw, 3046px" type="image/jpeg"/>
          <div data-rmiz-wrap="visible"><img class="Image__Zoom" src="/static/271882959bdca2fbaf7ddd839ec09d2e/c1e92/function-configuration.jpg" alt="AWS Lambda function configuration" style="display:block;margin:0 auto;width:100%;border-radius:0px"/><button aria-label="Zoom image" data-rmiz-btn-open="true" type="button"></button></div>
        </picture>
    </span></div><p class="css-8qp1bw ezkq0ko0">You can ignore the <code class="css-0">Advanced settings</code> for our use case.</p><p class="css-8qp1bw ezkq0ko0">Once the function is created, we have just a few configuration additions to make.</p><h3 id="adding-the-layer-to-our-lambda-function" class="css-8fj7fw e18lclmb2">Adding the layer to our Lambda function</h3><p class="css-8qp1bw ezkq0ko0">Now that our function is created, the first thing we want to do is add our <code class="css-0">wkhtmltopdf</code> layer.</p><p class="css-8qp1bw ezkq0ko0">At the top of the Function Overview panel, click the <code class="css-0">Layers</code> button right below your function name. This will bring you down to the layers section. Now click Add a layer.</p><p class="css-8qp1bw ezkq0ko0">Click on <code class="css-0">Specify an ARN</code> and copy your Layer Version ARN from earlier.</p><div class="Image__Small css-0">
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1614px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:46.468401486988846%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHclLwLB//EABgQAAIDAAAAAAAAAAAAAAAAAAEQAyEx/9oACAEBAAEFAqDkwL//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAAQAXH/2gAIAQEABj8CZr//xAAaEAACAgMAAAAAAAAAAAAAAAAAASAxQVGB/9oACAEBAAE/IVsRijkIf//aAAwDAQACAAMAAAAQQA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAADAAEFAAAAAAAAAAAAAAAAARFRECFBcaH/2gAIAQEAAT8QalSm9q4KuklxRLI8k5d6f//Z&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/8bdec375d248e143abe09b5ef6451ab0/47ae9/add-layer.webp 1614w" sizes="(max-width: 1614px) 100vw, 1614px" type="image/webp"/>
          <source srcSet="/static/8bdec375d248e143abe09b5ef6451ab0/b5018/add-layer.jpg 1614w" sizes="(max-width: 1614px) 100vw, 1614px" type="image/jpeg"/>
          <div data-rmiz-wrap="visible"><img class="Image__Zoom" src="/static/8bdec375d248e143abe09b5ef6451ab0/b5018/add-layer.jpg" alt="AWS Lambda add layer" style="display:block;margin:0 auto;width:100%;border-radius:0px"/><button aria-label="Zoom image" data-rmiz-btn-open="true" type="button"></button></div>
        </picture>
    </span></div><p class="css-8qp1bw ezkq0ko0">The reason why we need to specify our layer by ARN is because we didn’t define a runtime above.</p><p style="background-color:#9bc2cf;padding:7px 20px;text-align:center;border-radius:6px" class="css-8qp1bw ezkq0ko0"><b class="css-0">Important!</b> If your function generates a PDF with a bunch of black squares, this is likely because there is no font configuration within Lambda. To solve this, you can go to <a href="https://github.com/brandonlim-hs/fonts-aws-lambda-layer" target="_blank" class="css-mckguv e116srhk0">this link</a> that I mentioned earlier, and copy one of the AWS Linux Fonts ARNs for your region (or build from scratch), add the environment variable in the README, and repeat these steps to add a font layer.</p><h3 id="add-permission-to-access-your-s3-bucket" class="css-8fj7fw e18lclmb2">Add permission to access your S3 bucket</h3><p class="css-8qp1bw ezkq0ko0">One final function configuration that we need to add is permission for our function to access Amazon S3.  To do this, navigate to the Configuration tab below your Function Overview.</p><p class="css-8qp1bw ezkq0ko0">Under Configuration, go to the Permissions section. Here, you will see your generated Execution Role. Click this link to go to the IAM Console.</p><p class="css-8qp1bw ezkq0ko0">From here, click Attach policies, and add the <strong class="css-0">AmazonS3FullAccess</strong> policy like so</p><div class="Image__Medium css-0">
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:2732px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:45.92%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5qUA//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAAAARAhETFB/9oACAEBAAE/IaespFFHRx//2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgICAwAAAAAAAAAAAAAAAAEhMRFBUXGh/9oACAEBAAE/EMpnQh4E036T4HYou0Oz/9k=&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/d78496ab54660a156218df489144ddc5/a3bc4/iam-policy.webp 2500w,/static/d78496ab54660a156218df489144ddc5/57c94/iam-policy.webp 2732w" sizes="(max-width: 2732px) 100vw, 2732px" type="image/webp"/>
          <source srcSet="/static/d78496ab54660a156218df489144ddc5/44ecf/iam-policy.jpg 2500w,/static/d78496ab54660a156218df489144ddc5/3f3c3/iam-policy.jpg 2732w" sizes="(max-width: 2732px) 100vw, 2732px" type="image/jpeg"/>
          <div data-rmiz-wrap="visible"><img class="Image__Zoom" src="/static/d78496ab54660a156218df489144ddc5/3f3c3/iam-policy.jpg" alt="AWS Lambda IAM policy" style="display:block;margin:0 auto;width:100%;border-radius:0px"/><button aria-label="Zoom image" data-rmiz-btn-open="true" type="button"></button></div>
        </picture>
    </span></div><p class="css-8qp1bw ezkq0ko0">Now that our function is configured, we can dive into the actual requirements and code!</p><h3 id="requirements" class="css-8fj7fw e18lclmb2">Requirements</h3><ol class="css-1smg95t e37vq8s0"><li class="css-0">Allow passing either an S3 file key or an HTML string</li><li class="css-0">Return a file key for the generated PDF</li><li class="css-0">Accept a small set of options for the <code class="css-0">wkhtmltopdf</code> command<ul class="css-1rpojxi eouu7a70"><li class="css-0">A full man page can be found <a href="https://wkhtmltopdf.org/usage/wkhtmltopdf.txt" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0">here</a></li><li class="css-0">Most of the ones we’d want anyways are the default (i.e. <code class="css-0">--images</code>, <code class="css-0">--enable-external-links</code>, etc.)</li></ul></li></ol><p class="css-8qp1bw ezkq0ko0">Let’s allow the user to pass the following options</p><ul class="css-1rpojxi eouu7a70"><li class="css-0"><code class="css-0">--orientation &lt;orientation&gt;</code> - the common page orientation for the PDF file.<ul class="css-1rpojxi eouu7a70"><li class="css-0">Valid values are <code class="css-0">Landscape</code> or <code class="css-0">Portrait</code></li></ul></li><li class="css-0"><code class="css-0">--title &lt;text&gt;</code> - the title of the generated file.</li><li class="css-0">The margins of the file<ul class="css-1rpojxi eouu7a70"><li class="css-0"><code class="css-0">--margin-bottom &lt;unitreal&gt;</code></li><li class="css-0"><code class="css-0">--margin-left &lt;unitreal&gt;</code> (default is 10mm)</li><li class="css-0"><code class="css-0">--margin-right &lt;unitreal&gt;</code>  (default is 10mm)</li><li class="css-0"><code class="css-0">--margin-top &lt;unitreal&gt;</code></li></ul></li></ul><h3 id="assumptions-1" class="css-8fj7fw e18lclmb2">Assumptions</h3><ol class="css-1smg95t e37vq8s0"><li class="css-0">The HTML string or file will be valid and will include the necessary tags (<code class="css-0">&lt;!DOCTYPE html&gt;</code>, <code class="css-0">&lt;html&gt;</code>, <code class="css-0">&lt;head&gt;</code>, <code class="css-0">&lt;body&gt;</code>)</li><li class="css-0">The event payload will contain all valid values (S3 bucket name, file key, <code class="css-0">wkhtmltopdf</code> options etc.)</li></ol><h3 id="the-function-code" class="css-8fj7fw e18lclmb2">The function code</h3><p class="css-8qp1bw ezkq0ko0">By default, you will see the following handler.</p><div style="overflow:auto"><pre class="prism-code language-python" style="position:relative"><button data-a11y="false" class="css-1chxjt6 eu6xrih0">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token keyword">def</span><span class="token plain"> </span><span class="token function">lambda_handler</span><span class="token punctuation">(</span><span class="token plain">event</span><span class="token punctuation">,</span><span class="token plain"> context</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">    </span><span class="token comment"># TODO implement</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">        </span><span class="token string">&#x27;statusCode&#x27;</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">200</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">        </span><span class="token string">&#x27;body&#x27;</span><span class="token punctuation">:</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">dumps</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello from Lambda!&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">    </span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw ezkq0ko0">This is the code that will be executed when your function is called. We’ll come back to this in a bit.</p><style data-emotion-css="qybmnr">.css-qybmnr{word-break:keep-all;font-size:18px;line-height:1.45;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;}@media (max-width:33.75em){.css-qybmnr{font-size:16px;}}</style><h4 id="the-imports" class="css-qybmnr e18lclmb3">The imports</h4><p class="css-8qp1bw ezkq0ko0">First, let’s go ahead and import all of the Python libraries that we’ll need and set up some basic tools like the <code class="css-0">S3 client</code> and our <code class="css-0">logger</code>.</p><div style="overflow:auto"><pre class="prism-code language-python" style="position:relative"><button data-a11y="false" class="css-1chxjt6 eu6xrih0">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token keyword">from</span><span class="token plain"> datetime </span><span class="token keyword">import</span><span class="token plain"> datetime</span></div><div class="token-line"><span class="number-line">2</span><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> json</span></div><div class="token-line"><span class="number-line">3</span><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> logging</span></div><div class="token-line"><span class="number-line">4</span><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> os</span></div><div class="token-line"><span class="number-line">5</span><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> subprocess</span></div><div class="token-line"><span class="number-line">6</span><span class="token plain"></span><span class="token keyword">from</span><span class="token plain"> typing </span><span class="token keyword">import</span><span class="token plain"> Optional</span></div><div class="token-line"><span class="number-line">7</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> boto3</span></div><div class="token-line"><span class="number-line">9</span><span class="token plain"></span><span class="token keyword">from</span><span class="token plain"> botocore</span><span class="token punctuation">.</span><span class="token plain">exceptions </span><span class="token keyword">import</span><span class="token plain"> ClientError</span></div><div class="token-line"><span class="number-line">10</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">11</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">12</span><span class="token plain"></span><span class="token comment"># Set up logging</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">13</span><span class="token plain">logger </span><span class="token operator">=</span><span class="token plain"> logging</span><span class="token punctuation">.</span><span class="token plain">getLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">14</span><span class="token plain">logger</span><span class="token punctuation">.</span><span class="token plain">setLevel</span><span class="token punctuation">(</span><span class="token plain">logging</span><span class="token punctuation">.</span><span class="token plain">INFO</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">15</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">16</span><span class="token plain"></span><span class="token comment"># Get the s3 client</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">17</span><span class="token plain">s3 </span><span class="token operator">=</span><span class="token plain"> boto3</span><span class="token punctuation">.</span><span class="token plain">client</span><span class="token punctuation">(</span><span class="token string">&#x27;s3&#x27;</span><span class="token punctuation">)</span></div></pre></div><p class="css-8qp1bw ezkq0ko0">Now based upon our requirements, we’ll need helper functions to</p><ol class="css-1smg95t e37vq8s0"><li class="css-0">Download an HTML file from S3</li><li class="css-0">Upload a file to S3</li></ol><p class="css-8qp1bw ezkq0ko0">Let’s start with those, and then we’ll return to our lambda handler.</p><h4 id="downloadinguploading-the-file" class="css-qybmnr e18lclmb3">Downloading/uploading the file</h4><p class="css-8qp1bw ezkq0ko0"><a href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html" target="_blank" rel="noreferrer" class="css-mckguv e116srhk0"><code class="css-0">boto3</code></a> makes it really easy to interact with S3.  Using <code class="css-0">boto3</code>, we can add the following helper functions.</p><div style="overflow:auto"><pre class="prism-code language-python" style="position:relative"><button data-a11y="false" class="css-1chxjt6 eu6xrih0">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token keyword">def</span><span class="token plain"> </span><span class="token function">download_s3_file</span><span class="token punctuation">(</span><span class="token plain">bucket</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation">,</span><span class="token plain"> file_key</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">    </span><span class="token triple-quoted-string string">&quot;&quot;&quot;Downloads a file from s3 to `/tmp/[File Key]`.</span></div><div class="token-line"><span class="number-line">3</span><span class="token triple-quoted-string string">    </span></div><div class="token-line"><span class="number-line">4</span><span class="token triple-quoted-string string">    Args:</span></div><div class="token-line"><span class="number-line">5</span><span class="token triple-quoted-string string">        bucket (str): Name of the bucket where the file lives.</span></div><div class="token-line"><span class="number-line">6</span><span class="token triple-quoted-string string">        file_key (str): The file key of the file in the bucket.</span></div><div class="token-line"><span class="number-line">7</span><span class="token triple-quoted-string string"></span></div><div class="token-line"><span class="number-line">8</span><span class="token triple-quoted-string string">    Returns:</span></div><div class="token-line"><span class="number-line">9</span><span class="token triple-quoted-string string">        The local file name as a string.</span></div><div class="token-line"><span class="number-line">10</span><span class="token triple-quoted-string string">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">11</span><span class="token plain">    local_filename </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string-interpolation string">f&#x27;/tmp/</span><span class="token string-interpolation interpolation punctuation">{</span><span class="token string-interpolation interpolation">file_key</span><span class="token string-interpolation interpolation punctuation">}</span><span class="token string-interpolation string">&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">12</span><span class="token plain">    s3</span><span class="token punctuation">.</span><span class="token plain">download_file</span><span class="token punctuation">(</span><span class="token plain">Bucket</span><span class="token operator">=</span><span class="token plain">bucket</span><span class="token punctuation">,</span><span class="token plain"> Key</span><span class="token operator">=</span><span class="token plain">file_key</span><span class="token punctuation">,</span><span class="token plain"> Filename</span><span class="token operator">=</span><span class="token plain">local_filename</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">13</span><span class="token plain">    logger</span><span class="token punctuation">.</span><span class="token plain">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Downloaded HTML file to %s&#x27;</span><span class="token plain"> </span><span class="token operator">%</span><span class="token plain"> local_filename</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">14</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">15</span><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> local_filename</span></div><div class="token-line"><span class="number-line">16</span><span class="token plain">    </span></div><div class="token-line"><span class="number-line">17</span><span class="token plain">    </span></div><div class="token-line"><span class="number-line">18</span><span class="token plain"></span><span class="token keyword">def</span><span class="token plain"> </span><span class="token function">upload_file_to_s3</span><span class="token punctuation">(</span><span class="token plain">bucket</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation">,</span><span class="token plain"> filename</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> Optional</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">19</span><span class="token plain">    </span><span class="token triple-quoted-string string">&quot;&quot;&quot;Uploads the generated PDF to s3.</span></div><div class="token-line"><span class="number-line">20</span><span class="token triple-quoted-string string">    </span></div><div class="token-line"><span class="number-line">21</span><span class="token triple-quoted-string string">    Args:</span></div><div class="token-line"><span class="number-line">22</span><span class="token triple-quoted-string string">        bucket (str): Name of the s3 bucket to upload the PDF to.</span></div><div class="token-line"><span class="number-line">23</span><span class="token triple-quoted-string string">        filename (str): Location of the file to upload to s3.</span></div><div class="token-line"><span class="number-line">24</span><span class="token triple-quoted-string string">        </span></div><div class="token-line"><span class="number-line">25</span><span class="token triple-quoted-string string">    Returns:</span></div><div class="token-line"><span class="number-line">26</span><span class="token triple-quoted-string string">        The file key of the file in s3 if the upload was successful.</span></div><div class="token-line"><span class="number-line">27</span><span class="token triple-quoted-string string">        If the upload failed, then `None` will be returned.</span></div><div class="token-line"><span class="number-line">28</span><span class="token triple-quoted-string string">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">29</span><span class="token plain">    file_key </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">30</span><span class="token plain">    </span><span class="token keyword">try</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">31</span><span class="token plain">        file_key </span><span class="token operator">=</span><span class="token plain"> filename</span><span class="token punctuation">.</span><span class="token plain">replace</span><span class="token punctuation">(</span><span class="token string">&#x27;/tmp/&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">32</span><span class="token plain">        s3</span><span class="token punctuation">.</span><span class="token plain">upload_file</span><span class="token punctuation">(</span><span class="token plain">Filename</span><span class="token operator">=</span><span class="token plain">filename</span><span class="token punctuation">,</span><span class="token plain"> Bucket</span><span class="token operator">=</span><span class="token plain">bucket</span><span class="token punctuation">,</span><span class="token plain"> Key</span><span class="token operator">=</span><span class="token plain">file_key</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">33</span><span class="token plain">        logger</span><span class="token punctuation">.</span><span class="token plain">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Successfully uploaded the PDF to %s as %s&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">34</span><span class="token plain">                    </span><span class="token operator">%</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">bucket</span><span class="token punctuation">,</span><span class="token plain"> file_key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">35</span><span class="token plain">    </span><span class="token keyword">except</span><span class="token plain"> ClientError </span><span class="token keyword">as</span><span class="token plain"> e</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">36</span><span class="token plain">        logger</span><span class="token punctuation">.</span><span class="token plain">error</span><span class="token punctuation">(</span><span class="token string">&#x27;Failed to upload file to s3.&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">37</span><span class="token plain">        logger</span><span class="token punctuation">.</span><span class="token plain">error</span><span class="token punctuation">(</span><span class="token plain">e</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">38</span><span class="token plain">        file_key </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">39</span><span class="token plain">        </span></div><div class="token-line"><span class="number-line">40</span><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> file_key</span></div></pre></div><h4 id="parsing-the-event" class="css-qybmnr e18lclmb3">Parsing the event</h4><p class="css-8qp1bw ezkq0ko0">One thing we haven’t talked about yet is the data that we’ll need to pass our function.</p><p class="css-8qp1bw ezkq0ko0">Let’s define our JSON event schema as the following.</p><div style="overflow:auto"><pre class="prism-code language-json" style="position:relative"><button data-a11y="false" class="css-1chxjt6 eu6xrih0">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">    </span><span class="token property">&quot;bucket&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;&lt;Name of the bucket where the file is stored currently and will be stored after processing&gt; [Required]&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">    </span><span class="token property">&quot;file_key&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;&lt;File key where the file is store in S3&gt; [Required if `html_string` is not defined]&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">    </span><span class="token property">&quot;html_string&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;&lt;HTML string to convert to a PDF&gt; [Required if `file_key` is not defined]&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">    </span><span class="token property">&quot;wkhtmltopdf_options&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        </span><span class="token property">&quot;orientation&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;&lt;`landscape` or `portrait`&gt; [Optional: Default is `portrait`]&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">        </span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;&lt;Title of the PDF&gt; [Optional]&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain">        </span><span class="token property">&quot;margin&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;&lt;Margin of the PDF (same format as css [&lt;top&gt; &lt;right&gt; &lt;bottom&gt; &lt;left&gt;] (all must be included)).&gt; [Optional]&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">9</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">10</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw ezkq0ko0"><code class="css-0">wkhtmltopdf_options</code> is an optional object. If the included options are not valid, they will not be included.</p><p class="css-8qp1bw ezkq0ko0">We can access all of the data passed to our function from the <code class="css-0">event</code> parameter in the <code class="css-0">lambda_handler</code> function.</p><p class="css-8qp1bw ezkq0ko0">Now, let’s jump back to the <code class="css-0">lambda_handler</code> function and add some code to pull out the data from our event and put together the remaining pieces of actually calling the <code class="css-0">wkhtmltopdf</code> executable to finish our lambda function.</p><div style="overflow:auto"><pre class="prism-code language-python" style="position:relative"><button data-a11y="false" class="css-1chxjt6 eu6xrih0">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token keyword">def</span><span class="token plain"> </span><span class="token function">lambda_handler</span><span class="token punctuation">(</span><span class="token plain">event</span><span class="token punctuation">,</span><span class="token plain"> context</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">    logger</span><span class="token punctuation">.</span><span class="token plain">info</span><span class="token punctuation">(</span><span class="token plain">event</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">    </span><span class="token comment"># bucket is always required</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">    </span><span class="token keyword">try</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        bucket </span><span class="token operator">=</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;bucket&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">    </span><span class="token keyword">except</span><span class="token plain"> KeyError</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain">        error_message </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;Missing required &quot;bucket&quot; parameter from request payload.&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">9</span><span class="token plain">        logger</span><span class="token punctuation">.</span><span class="token plain">error</span><span class="token punctuation">(</span><span class="token plain">error_message</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">10</span><span class="token plain">        </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">11</span><span class="token plain">            </span><span class="token string">&#x27;status&#x27;</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">400</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">12</span><span class="token plain">            </span><span class="token string">&#x27;body&#x27;</span><span class="token punctuation">:</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">dumps</span><span class="token punctuation">(</span><span class="token plain">error_message</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">13</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">14</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">15</span><span class="token plain">    </span><span class="token comment"># html_string and file_key are conditionally required, so let&#x27;s try to get both</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">16</span><span class="token plain">    </span><span class="token keyword">try</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">17</span><span class="token plain">        file_key </span><span class="token operator">=</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;file_key&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">18</span><span class="token plain">    </span><span class="token keyword">except</span><span class="token plain"> KeyError</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">19</span><span class="token plain">        file_key </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">20</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">21</span><span class="token plain">    </span><span class="token keyword">try</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">22</span><span class="token plain">        html_string </span><span class="token operator">=</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;html_string&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">23</span><span class="token plain">    </span><span class="token keyword">except</span><span class="token plain"> KeyError</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">24</span><span class="token plain">        html_string </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">25</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">26</span><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> file_key </span><span class="token keyword">is</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token plain"> </span><span class="token keyword">and</span><span class="token plain"> html_string </span><span class="token keyword">is</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">27</span><span class="token plain">        error_message </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">28</span><span class="token plain">            </span><span class="token string">&#x27;Missing both a &quot;file_key&quot; and &quot;html_string&quot; &#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">29</span><span class="token plain">            </span><span class="token string">&#x27;from request payload. One of these must be &#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">30</span><span class="token plain">            </span><span class="token string">&#x27;included.&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">31</span><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">32</span><span class="token plain">        logger</span><span class="token punctuation">.</span><span class="token plain">error</span><span class="token punctuation">(</span><span class="token plain">error_message</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">33</span><span class="token plain">        </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">34</span><span class="token plain">            </span><span class="token string">&#x27;status&#x27;</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">400</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">35</span><span class="token plain">            </span><span class="token string">&#x27;body&#x27;</span><span class="token punctuation">:</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">dumps</span><span class="token punctuation">(</span><span class="token plain">error_message</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">36</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">37</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">38</span><span class="token plain">    </span><span class="token comment"># Now we can check for the option wkhtmltopdf_options and map them to values</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">39</span><span class="token plain">    </span><span class="token comment"># Again, part of our assumptions are that these are valid</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">40</span><span class="token plain">    wkhtmltopdf_options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">41</span><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token string">&#x27;wkhtmltopdf_options&#x27;</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> event</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">42</span><span class="token plain">        </span><span class="token comment"># Margin is &lt;top&gt; &lt;right&gt; &lt;bottom&gt; &lt;left&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">43</span><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token string">&#x27;margin&#x27;</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;wkhtmltopdf_options&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">44</span><span class="token plain">            margins </span><span class="token operator">=</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;wkhtmltopdf_options&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;margin&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token plain">split</span><span class="token punctuation">(</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">45</span><span class="token plain">            </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token plain">margins</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">46</span><span class="token plain">                wkhtmltopdf_options</span><span class="token punctuation">[</span><span class="token string">&#x27;margin-top&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> margins</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">47</span><span class="token plain">                wkhtmltopdf_options</span><span class="token punctuation">[</span><span class="token string">&#x27;margin-right&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> margins</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">48</span><span class="token plain">                wkhtmltopdf_options</span><span class="token punctuation">[</span><span class="token string">&#x27;margin-bottom&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> margins</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">49</span><span class="token plain">                wkhtmltopdf_options</span><span class="token punctuation">[</span><span class="token string">&#x27;margin-left&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> margins</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">50</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">51</span><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token string">&#x27;orientation&#x27;</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;wkhtmltopdf_options&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">52</span><span class="token plain">            wkhtmltopdf_options</span><span class="token punctuation">[</span><span class="token string">&#x27;orientation&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;portrait&#x27;</span><span class="token plain"> \</span></div><div class="token-line"><span class="number-line">53</span><span class="token plain">                </span><span class="token keyword">if</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;wkhtmltopdf_options&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;orientation&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token plain">lower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">not</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;portrait&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;landscape&#x27;</span><span class="token punctuation">]</span><span class="token plain"> \</span></div><div class="token-line"><span class="number-line">54</span><span class="token plain">                </span><span class="token keyword">else</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;wkhtmltopdf_options&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;orientation&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token plain">lower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">55</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">56</span><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token string">&#x27;title&#x27;</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;wkhtmltopdf_options&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">57</span><span class="token plain">            wkhtmltopdf_options</span><span class="token punctuation">[</span><span class="token string">&#x27;title&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> event</span><span class="token punctuation">[</span><span class="token string">&#x27;wkhtmltopdf_options&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#x27;title&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">58</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">59</span><span class="token plain">    </span><span class="token comment"># If we got a file_key in the request, let&#x27;s download our file</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">60</span><span class="token plain">    </span><span class="token comment"># If not, we&#x27;ll write the HTML string to a file</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">61</span><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> file_key </span><span class="token keyword">is</span><span class="token plain"> </span><span class="token keyword">not</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">62</span><span class="token plain">        local_filename </span><span class="token operator">=</span><span class="token plain"> download_s3_file</span><span class="token punctuation">(</span><span class="token plain">bucket</span><span class="token punctuation">,</span><span class="token plain"> file_key</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">63</span><span class="token plain">    </span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">64</span><span class="token plain">        timestamp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token plain">datetime</span><span class="token punctuation">.</span><span class="token plain">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token plain">replace</span><span class="token punctuation">(</span><span class="token string">&#x27;.&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token plain">replace</span><span class="token punctuation">(</span><span class="token string">&#x27; &#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;_&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">65</span><span class="token plain">        local_filename </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string-interpolation string">f&#x27;/tmp/</span><span class="token string-interpolation interpolation punctuation">{</span><span class="token string-interpolation interpolation">timestamp</span><span class="token string-interpolation interpolation punctuation">}</span><span class="token string-interpolation string">-html-string.html&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">66</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">67</span><span class="token plain">        </span><span class="token comment"># Delete any existing files with that name</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">68</span><span class="token plain">        </span><span class="token keyword">try</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">69</span><span class="token plain">            os</span><span class="token punctuation">.</span><span class="token plain">unlink</span><span class="token punctuation">(</span><span class="token plain">local_filename</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">70</span><span class="token plain">        </span><span class="token keyword">except</span><span class="token plain"> FileNotFoundError</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">71</span><span class="token plain">            </span><span class="token keyword">pass</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">72</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">73</span><span class="token plain">        </span><span class="token keyword">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token plain">local_filename</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;w&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token keyword">as</span><span class="token plain"> f</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">74</span><span class="token plain">            f</span><span class="token punctuation">.</span><span class="token plain">write</span><span class="token punctuation">(</span><span class="token plain">html_string</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">75</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">76</span><span class="token plain">    </span><span class="token comment"># Now we can create our command string to execute and upload the result to s3</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">77</span><span class="token plain">    command </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;wkhtmltopdf  --load-error-handling ignore&#x27;</span><span class="token plain">  </span><span class="token comment"># ignore unecessary errors</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">78</span><span class="token plain">    </span><span class="token keyword">for</span><span class="token plain"> key</span><span class="token punctuation">,</span><span class="token plain"> value </span><span class="token keyword">in</span><span class="token plain"> wkhtmltopdf_options</span><span class="token punctuation">.</span><span class="token plain">items</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">79</span><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> key </span><span class="token operator">==</span><span class="token plain"> </span><span class="token string">&#x27;title&#x27;</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">80</span><span class="token plain">            value </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string-interpolation string">f&#x27;&quot;</span><span class="token string-interpolation interpolation punctuation">{</span><span class="token string-interpolation interpolation">value</span><span class="token string-interpolation interpolation punctuation">}</span><span class="token string-interpolation string">&quot;&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">81</span><span class="token plain">        command </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string">&#x27; --{0} {1}&#x27;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token plain">key</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">82</span><span class="token plain">    command </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string">&#x27; {0} {1}&#x27;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token plain">local_filename</span><span class="token punctuation">,</span><span class="token plain"> local_filename</span><span class="token punctuation">.</span><span class="token plain">replace</span><span class="token punctuation">(</span><span class="token string">&#x27;.html&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;.pdf&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">83</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">84</span><span class="token plain">    </span><span class="token comment"># Important! Remember, we said that we are assuming we&#x27;re accepting valid HTML</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">85</span><span class="token plain">    </span><span class="token comment"># this should always be checked to avoid allowing any string to be executed</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">86</span><span class="token plain">    </span><span class="token comment"># from this command. The reason we use shell=True here is because our title</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">87</span><span class="token plain">    </span><span class="token comment"># can be multiple words.</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">88</span><span class="token plain">    subprocess</span><span class="token punctuation">.</span><span class="token plain">run</span><span class="token punctuation">(</span><span class="token plain">command</span><span class="token punctuation">,</span><span class="token plain"> shell</span><span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">89</span><span class="token plain">    logger</span><span class="token punctuation">.</span><span class="token plain">info</span><span class="token punctuation">(</span><span class="token string">&#x27;Successfully generated the PDF.&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">90</span><span class="token plain">    file_key </span><span class="token operator">=</span><span class="token plain"> upload_file_to_s3</span><span class="token punctuation">(</span><span class="token plain">bucket</span><span class="token punctuation">,</span><span class="token plain"> local_filename</span><span class="token punctuation">.</span><span class="token plain">replace</span><span class="token punctuation">(</span><span class="token string">&#x27;.html&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;.pdf&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">91</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">92</span><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> file_key </span><span class="token keyword">is</span><span class="token plain"> </span><span class="token boolean">None</span><span class="token punctuation">:</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">93</span><span class="token plain">        error_message </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">94</span><span class="token plain">            </span><span class="token string">&#x27;Failed to generate PDF from the given HTML file.&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">95</span><span class="token plain">            </span><span class="token string">&#x27; Please check to make sure the file is valid HTML.&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">96</span><span class="token plain">        </span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">97</span><span class="token plain">        logger</span><span class="token punctuation">.</span><span class="token plain">error</span><span class="token punctuation">(</span><span class="token plain">error_message</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">98</span><span class="token plain">        </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">99</span><span class="token plain">            </span><span class="token string">&#x27;status&#x27;</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">400</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">100</span><span class="token plain">            </span><span class="token string">&#x27;body&#x27;</span><span class="token punctuation">:</span><span class="token plain"> json</span><span class="token punctuation">.</span><span class="token plain">dumps</span><span class="token punctuation">(</span><span class="token plain">error_message</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">101</span><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">102</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">103</span><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">104</span><span class="token plain">        </span><span class="token string">&#x27;status&#x27;</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">200</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">105</span><span class="token plain">        </span><span class="token string">&#x27;file_key&#x27;</span><span class="token punctuation">:</span><span class="token plain"> file_key</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">106</span><span class="token plain">    </span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw ezkq0ko0">Now you can go to the Test tab and create the following test event (change your bucket name as necessary)</p><div style="overflow:auto"><pre class="prism-code language-json" style="position:relative"><button data-a11y="false" class="css-1chxjt6 eu6xrih0">Copy <svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#6f7177"></path></svg></button><div class="token-line"><span class="number-line">1</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">2</span><span class="token plain">    </span><span class="token property">&quot;bucket&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;bucket-for-articles&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">3</span><span class="token plain">    </span><span class="token property">&quot;html_string&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;This is an example of a simple HTML page.&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">4</span><span class="token plain">    </span><span class="token property">&quot;wkhtmltopdf_options&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">5</span><span class="token plain">        </span><span class="token property">&quot;orientation&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;portrait&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">6</span><span class="token plain">        </span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;Test PDF Generation&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">7</span><span class="token plain">        </span><span class="token property">&quot;margin&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;10mm 10mm 10mm 10mm&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">8</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="number-line">9</span><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p class="css-8qp1bw ezkq0ko0">You should get a return event with a <code class="css-0">status</code> of <code class="css-0">200</code>, and a <code class="css-0">file_key</code> of your converted file, thus achieving our goal! <!-- -->🎉</p><hr class="css-xu77su e1yst2jy0"/><style data-emotion-css="akmrme animation-1xhp7f5">.css-akmrme{position:absolute;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1;width:225px;height:46px;padding:7px 11px 7px 19px;color:var(--theme-ui-colors-grey,#73737D);background:#000;border-radius:5px;font-size:18px;font-weight:600;-webkit-transition:left 75ms ease-out,right 75ms ease-out,background 200ms;transition:left 75ms ease-out,right 75ms ease-out,background 200ms;-webkit-animation:animation-1xhp7f5 200ms forwards;animation:animation-1xhp7f5 200ms forwards;}.css-akmrme::after{content:'';position:absolute;left:0;right:0;margin:0 auto;bottom:-8px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #000;-webkit-transition:border-color 200ms;transition:border-color 200ms;}.css-akmrme svg path{fill:#fff;}@-webkit-keyframes animation-1xhp7f5{0%{-webkit-transform:matrix(.97,0,0,1,0,12);-ms-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12);opacity:0;}20%{-webkit-transform:matrix(.99,0,0,1,0,2);-ms-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2);opacity:.7;}40%{-webkit-transform:matrix(1,0,0,1,0,-1);-ms-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1;}70%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}100%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}}@keyframes animation-1xhp7f5{0%{-webkit-transform:matrix(.97,0,0,1,0,12);-ms-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12);opacity:0;}20%{-webkit-transform:matrix(.99,0,0,1,0,2);-ms-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2);opacity:.7;}40%{-webkit-transform:matrix(1,0,0,1,0,-1);-ms-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1;}70%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}100%{-webkit-transform:matrix(1,0,0,1,0,0);-ms-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1;}}</style><div style="position:absolute;left:0px;top:0px;display:none;pointer-events:none" class="css-akmrme exucw410"><style data-emotion-css="12z0wuy">.css-12z0wuy{margin-right:8px;}</style><span class="css-12z0wuy exucw411">Share: </span><style data-emotion-css="pd22cz">.css-pd22cz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 11px;cursor:pointer;}</style><a class="css-pd22cz exucw413"><style data-emotion-css="18l3o48">.css-18l3o48{width:0px;height:0px;visibility:hidden;opacity:0;}</style><div class="css-18l3o48 exucw412">Share the selected text</div><svg width="18px" height="15px" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.0658 2.34438C14.7013 1.96349 15.1892 1.3604 15.419 0.641811C14.8244 0.994439 14.1658 1.25056 13.4648 1.3886C12.9034 0.7905 12.1036 0.416748 11.2185 0.416748C9.51888 0.416748 8.14096 1.79461 8.14096 3.49411C8.14096 3.7353 8.16822 3.97019 8.22068 4.19542C5.66301 4.06708 3.39543 2.84191 1.8776 0.980064C1.6127 1.43458 1.46094 1.96322 1.46094 2.52719C1.46094 3.59485 2.00428 4.5368 2.83003 5.08865C2.32553 5.07268 1.85104 4.93425 1.43608 4.70376C1.43586 4.71659 1.43586 4.72949 1.43586 4.74244C1.43586 6.23349 2.49666 7.47732 3.90448 7.75999C3.64622 7.83033 3.37436 7.86792 3.09366 7.86792C2.89537 7.86792 2.70257 7.84866 2.51471 7.81272C2.90629 9.03537 4.0428 9.92509 5.38945 9.94994C4.33623 10.7753 3.00928 11.2673 1.56749 11.2673C1.31911 11.2673 1.07413 11.2528 0.833374 11.2243C2.19527 12.0975 3.81291 12.6069 5.55081 12.6069C11.2113 12.6069 14.3067 7.91763 14.3067 3.85096C14.3067 3.71753 14.3037 3.5848 14.2978 3.45285C14.899 3.01896 15.4208 2.47694 15.8334 1.8598C15.2815 2.10456 14.6884 2.26998 14.0658 2.34438Z" fill="white"></path></svg></a><a class="css-pd22cz exucw413"><div class="css-18l3o48 exucw412">Share the selected text</div><svg width="16px" height="16px" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.59615 13.125H0.871552V4.36523H3.59615V13.125ZM2.24847 3.16406C1.81878 3.16406 1.44769 3.00781 1.13519 2.69531C0.822692 2.38281 0.666443 2.01171 0.666443 1.58203C0.666443 1.15234 0.822692 0.781248 1.13519 0.468749C1.44769 0.156249 1.81878 0 2.24847 0C2.67816 0 3.04925 0.156249 3.36175 0.468749C3.67425 0.781248 3.8305 1.15234 3.8305 1.58203C3.8305 2.01171 3.67425 2.38281 3.36175 2.69531C3.04925 3.00781 2.67816 3.16406 2.24847 3.16406ZM13.7915 13.125H11.0669V8.84765C11.0669 8.14452 11.0083 7.63671 10.8911 7.32421C10.6763 6.79687 10.2563 6.5332 9.63134 6.5332C9.00634 6.5332 8.56689 6.76757 8.31298 7.23632C8.11767 7.58788 8.02001 8.10546 8.02001 8.78905V13.125H5.32471V4.36523H7.93212V5.5664H7.96142C8.15673 5.17578 8.46923 4.85351 8.89892 4.59961C9.36767 4.28711 9.91454 4.13086 10.5395 4.13086C11.8091 4.13086 12.6977 4.53125 13.2055 5.33203C13.5962 5.97656 13.7915 6.97265 13.7915 8.3203V13.125Z" fill="white"></path></svg></a><style data-emotion-css="1lnhvdd">.css-1lnhvdd{display:inline-block;height:17px;width:1px;position:relative;margin:0 8px;background:rgba(115,115,125,0.3);}</style><div class="css-1lnhvdd exucw415"></div><style data-emotion-css="15hjez6">.css-15hjez6{display:inline-block;padding:16px 11px;}</style><button aria-label="Copy selected text" class="css-15hjez6 exucw414"><svg width="15" height="19" viewBox="0 0 15 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0475 0.905273H1.67197C0.812542 0.905273 0.109375 1.60844 0.109375 2.46787V13.406H1.67197V2.46787H11.0475V0.905273ZM13.3914 4.03046H4.79716C3.93773 4.03046 3.23456 4.73363 3.23456 5.59306V16.5312C3.23456 17.3906 3.93773 18.0938 4.79716 18.0938H13.3914C14.2509 18.0938 14.954 17.3906 14.954 16.5312V5.59306C14.954 4.73363 14.2509 4.03046 13.3914 4.03046ZM13.3914 16.5312H4.79716V5.59306H13.3914V16.5312Z" fill="#08080B"></path></svg></button></div></div></article><style data-emotion-css="npfbur">.css-npfbur{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;display:block;}@media (max-width:66.875em){.css-npfbur{max-width:850px;}}@media (max-width:45.9375em){.css-npfbur{padding:0 2rem;max-width:527px;}}@media (max-width:33.75em){.css-npfbur{max-width:100%;}}</style><section class="css-npfbur eih7p4r2"><style data-emotion-css="1vgsxfa">.css-1vgsxfa{position:relative;opacity:0.25;margin-bottom:100px;font-weight:400;color:var(--theme-ui-colors-primary,#000);}@media (max-width:45.9375em){.css-1vgsxfa{margin-bottom:60px;}}.css-1vgsxfa::after{content:'';position:absolute;background:var(--theme-ui-colors-grey,#73737D);width:79.82456140350878%;height:1px;right:0;top:11px;}@media (max-width:45.9375em){.css-1vgsxfa::after{width:52.63157894736842%;}}@media (max-width:33.75em){.css-1vgsxfa::after{width:35.08771929824561%;}}@media (max-width:23.5em){.css-1vgsxfa::after{width:90px;}}</style><h3 class="css-1vgsxfa eih7p4r3">More articles from <!-- -->Bradley Schoeneweis</h3><style data-emotion-css="80jzpj">.css-80jzpj{position:relative;display:grid;grid-template-columns:1fr 457px;grid-template-rows:2;-webkit-column-gap:30px;column-gap:30px;margin:0 auto;max-width:100%;}@media (max-width:66.875em){.css-80jzpj{grid-template-columns:1fr 1fr;}}@media (max-width:45.9375em){.css-80jzpj{grid-template-columns:1fr;}}</style><div class="css-80jzpj e1o8vm2h0"><style data-emotion-css="16a98w2">.css-16a98w2{position:relative;display:block;width:100%;height:100%;top:0;left:0;z-index:1;-webkit-transition:-webkit-transform 0.33s var(--ease-out-quart);-webkit-transition:transform 0.33s var(--ease-out-quart);transition:transform 0.33s var(--ease-out-quart);-webkit-tap-highlight-color:rgba(255,255,255,0);}.css-16a98w2:hover .e1o8vm2h1{-webkit-transform:translateY(-1px);-ms-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 50px 80px -20px rgba(0,0,0,0.27),0 30px 50px -30px rgba(0,0,0,0.3);}.css-16a98w2:hover h2,.css-16a98w2:focus h2{color:var(--theme-ui-colors-accent,#6166DC);}.css-16a98w2[data-a11y="true"]:focus::after{content:"";position:absolute;left:-2%;top:-2%;width:104%;height:104%;border:3px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);}@media (max-width:33.75em){.css-16a98w2:hover .e1o8vm2h1{-webkit-transform:none;-ms-transform:none;transform:none;box-shadow:initial;}.css-16a98w2:active{-webkit-transform:scale(0.97) translateY(3px);-ms-transform:scale(0.97) translateY(3px);transform:scale(0.97) translateY(3px);}}</style><a data-a11y="false" narrow="false" class="css-16a98w2 e1o8vm2h6" href="/visualizing-your-linkedin-connections-using-python"><style data-emotion-css="1g2qwvh">.css-1g2qwvh{position:relative;}@media (max-width:540px){.css-1g2qwvh{box-shadow:0px 20px 40px rgba(0,0,0,0.2);border-bottom-right-radius:5px;border-bottom-left-radius:5px;background:var(--theme-ui-colors-card,#fff);}}</style><div class="css-1g2qwvh e1o8vm2h2"><style data-emotion-css="f56zxy">.css-f56zxy{position:relative;height:280px;box-shadow:0 30px 60px -10px rgba(0,0,0,0.3),0 18px 36px -18px rgba(0,0,0,0.33);margin-bottom:30px;-webkit-transition:-webkit-transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);-webkit-transition:transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);transition:transform 0.3s var(--ease-out-quad),box-shadow 0.3s var(--ease-out-quad);}.css-f56zxy > div{height:100%;}@media (max-width:45.9375em){.css-f56zxy{height:220px;margin-bottom:35px;}}@media (max-width:33.75em){.css-f56zxy{height:200px;margin-bottom:0;box-shadow:none;overflow:hidden;border-top-right-radius:5px;border-top-left-radius:5px;}}</style><div class="css-f56zxy e1o8vm2h1"><div class="css-133qvua e13158qv0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:49.079754601226995%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeRU6SD/xAAWEAEBAQAAAAAAAAAAAAAAAAABECD/2gAIAQEAAQUCMM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAACAwAAAAAAAAAAAAAAAAAAASAhMf/aAAgBAQABPyHQ7UX/2gAMAwEAAgADAAAAEJvP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMAAwAAAAAAAAAAAAAAAQAQIRExUf/aAAgBAQABPxADqcE6w8oxI6//2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/6442e3e228d95d531af84e6abc5c53cc/ac59e/hero.webp 163w,
/static/6442e3e228d95d531af84e6abc5c53cc/7660b/hero.webp 327w,
/static/6442e3e228d95d531af84e6abc5c53cc/0acdf/hero.webp 653w,
/static/6442e3e228d95d531af84e6abc5c53cc/75470/hero.webp 980w,
/static/6442e3e228d95d531af84e6abc5c53cc/9000d/hero.webp 1200w" sizes="(max-width: 653px) 100vw, 653px" /><source srcset="/static/6442e3e228d95d531af84e6abc5c53cc/3a5ce/hero.jpg 163w,
/static/6442e3e228d95d531af84e6abc5c53cc/05730/hero.jpg 327w,
/static/6442e3e228d95d531af84e6abc5c53cc/1dc0b/hero.jpg 653w,
/static/6442e3e228d95d531af84e6abc5c53cc/f72c7/hero.jpg 980w,
/static/6442e3e228d95d531af84e6abc5c53cc/0ff54/hero.jpg 1200w" sizes="(max-width: 653px) 100vw, 653px" /><img loading="lazy" sizes="(max-width: 653px) 100vw, 653px" srcset="/static/6442e3e228d95d531af84e6abc5c53cc/3a5ce/hero.jpg 163w,
/static/6442e3e228d95d531af84e6abc5c53cc/05730/hero.jpg 327w,
/static/6442e3e228d95d531af84e6abc5c53cc/1dc0b/hero.jpg 653w,
/static/6442e3e228d95d531af84e6abc5c53cc/f72c7/hero.jpg 980w,
/static/6442e3e228d95d531af84e6abc5c53cc/0ff54/hero.jpg 1200w" src="/static/6442e3e228d95d531af84e6abc5c53cc/1dc0b/hero.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><style data-emotion-css="1iwkho8">.css-1iwkho8{word-break:keep-all;font-size:24px;line-height:1.45;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;font-size:22px;line-height:1.4;margin-bottom:10px;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;-webkit-transition:color 0.3s ease-in-out;transition:color 0.3s ease-in-out;text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;}@media (max-width:45.9375em){.css-1iwkho8{font-size:22px;}}@media (max-width:33.75em){.css-1iwkho8{font-size:20px;}}@media (max-width:33.75em){.css-1iwkho8{-webkit-line-clamp:3;}}@media (max-width:45.9375em){.css-1iwkho8{margin-bottom:15px;}}@media (max-width:33.75em){.css-1iwkho8{padding:30px 20px 0;margin-bottom:10px;-webkit-line-clamp:3;}}</style><h3 class="css-1iwkho8 e1o8vm2h3">Visualizing your LinkedIn Connections using Python</h3><style data-emotion-css="1rec7sy">.css-1rec7sy{text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;font-size:16px;margin-bottom:10px;color:var(--theme-ui-colors-grey,#73737D);display:box;max-width:515px;}@media (max-width:33.75em){.css-1rec7sy{-webkit-line-clamp:3;}}@media (max-width:66.875em){.css-1rec7sy{display:-webkit-box;}}@media (max-width:45.9375em){.css-1rec7sy{margin-bottom:15px;}}@media (max-width:33.75em){.css-1rec7sy{max-width:100%;padding:0 20px;margin-bottom:20px;-webkit-line-clamp:3;}}</style><p class="css-1rec7sy e1o8vm2h4">Using Python&#x27;s Pandas, NetworkX, and pyvis to understand and visualize companies within a directly connected LinkedIn network.</p><style data-emotion-css="118hiy6">.css-118hiy6{font-weight:600;font-size:16px;color:var(--theme-ui-colors-grey,#73737D);opacity:0.33;}@media (max-width:33.75em){.css-118hiy6{max-width:100%;padding:0 20px 30px;}}</style><div class="css-118hiy6 e1o8vm2h5">April 8th, 2021<!-- --> · <!-- -->4<!-- --> min read</div> </div></a><style data-emotion-css="1f0c0jf">.css-1f0c0jf{position:relative;display:block;width:100%;height:100%;top:0;left:0;z-index:1;-webkit-transition:-webkit-transform 0.33s var(--ease-out-quart);-webkit-transition:transform 0.33s var(--ease-out-quart);transition:transform 0.33s var(--ease-out-quart);-webkit-tap-highlight-color:rgba(255,255,255,0);}.css-1f0c0jf:hover .e1o8vm2h1{-webkit-transform:translateY(-1px);-ms-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 50px 80px -20px rgba(0,0,0,0.27),0 30px 50px -30px rgba(0,0,0,0.3);}.css-1f0c0jf:hover h2,.css-1f0c0jf:focus h2{color:var(--theme-ui-colors-accent,#6166DC);}.css-1f0c0jf[data-a11y="true"]:focus::after{content:"";position:absolute;left:-2%;top:-2%;width:104%;height:104%;border:3px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);}@media (max-width:45.9375em){.css-1f0c0jf{display:none;}}@media (max-width:33.75em){.css-1f0c0jf:hover .e1o8vm2h1{-webkit-transform:none;-ms-transform:none;transform:none;box-shadow:initial;}.css-1f0c0jf:active{-webkit-transform:scale(0.97) translateY(3px);-ms-transform:scale(0.97) translateY(3px);transform:scale(0.97) translateY(3px);}}</style><a data-a11y="false" narrow="true" class="css-1f0c0jf e1o8vm2h6" href="/forecasting-spy-prices-using-facebook&#x27;s-prophet"><div class="css-1g2qwvh e1o8vm2h2"><div class="css-f56zxy e1o8vm2h1"><div class="css-133qvua e13158qv0 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:37.719298245614034%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB35Cwf//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABgQAQEAAwAAAAAAAAAAAAAAABEBABBB/9oACAEBAAE/IbTF4a//2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAEFAQAAAAAAAAAAAAAAAREAECFBUXH/2gAIAQEAAT8Q2BfCaliIdbf/2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source type='image/webp' srcset="/static/289d610fb24300267345886ab40c2c7c/31fce/hero.webp 114w,
/static/289d610fb24300267345886ab40c2c7c/e3e25/hero.webp 229w,
/static/289d610fb24300267345886ab40c2c7c/15384/hero.webp 457w,
/static/289d610fb24300267345886ab40c2c7c/0258d/hero.webp 686w,
/static/289d610fb24300267345886ab40c2c7c/64ea2/hero.webp 914w,
/static/289d610fb24300267345886ab40c2c7c/9000d/hero.webp 1200w" sizes="(max-width: 457px) 100vw, 457px" /><source srcset="/static/289d610fb24300267345886ab40c2c7c/5a3ee/hero.jpg 114w,
/static/289d610fb24300267345886ab40c2c7c/41f8f/hero.jpg 229w,
/static/289d610fb24300267345886ab40c2c7c/eaa58/hero.jpg 457w,
/static/289d610fb24300267345886ab40c2c7c/c309b/hero.jpg 686w,
/static/289d610fb24300267345886ab40c2c7c/e3008/hero.jpg 914w,
/static/289d610fb24300267345886ab40c2c7c/0ff54/hero.jpg 1200w" sizes="(max-width: 457px) 100vw, 457px" /><img loading="lazy" sizes="(max-width: 457px) 100vw, 457px" srcset="/static/289d610fb24300267345886ab40c2c7c/5a3ee/hero.jpg 114w,
/static/289d610fb24300267345886ab40c2c7c/41f8f/hero.jpg 229w,
/static/289d610fb24300267345886ab40c2c7c/eaa58/hero.jpg 457w,
/static/289d610fb24300267345886ab40c2c7c/c309b/hero.jpg 686w,
/static/289d610fb24300267345886ab40c2c7c/e3008/hero.jpg 914w,
/static/289d610fb24300267345886ab40c2c7c/0ff54/hero.jpg 1200w" src="/static/289d610fb24300267345886ab40c2c7c/eaa58/hero.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><style data-emotion-css="he0nwc">.css-he0nwc{word-break:keep-all;font-size:24px;line-height:1.45;font-weight:bold;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;font-size:22px;line-height:1.4;margin-bottom:45px;color:var(--theme-ui-colors-primary,#000);font-family:'Merriweather',Georgia,Serif;-webkit-transition:color 0.3s ease-in-out;transition:color 0.3s ease-in-out;text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;}@media (max-width:45.9375em){.css-he0nwc{font-size:22px;}}@media (max-width:33.75em){.css-he0nwc{font-size:20px;}}@media (max-width:33.75em){.css-he0nwc{-webkit-line-clamp:3;}}@media (max-width:45.9375em){.css-he0nwc{margin-bottom:15px;}}@media (max-width:33.75em){.css-he0nwc{padding:30px 20px 0;margin-bottom:10px;-webkit-line-clamp:3;}}</style><h3 class="css-he0nwc e1o8vm2h3">Forecasting SPY prices using Facebook&#x27;s Prophet</h3><style data-emotion-css="l4ss9o">.css-l4ss9o{text-overflow:ellipsis;overflow-wrap:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;white-space:normal;overflow:hidden;font-size:16px;margin-bottom:10px;color:var(--theme-ui-colors-grey,#73737D);display:none;max-width:515px;}@media (max-width:33.75em){.css-l4ss9o{-webkit-line-clamp:3;}}@media (max-width:66.875em){.css-l4ss9o{display:-webkit-box;}}@media (max-width:45.9375em){.css-l4ss9o{margin-bottom:15px;}}@media (max-width:33.75em){.css-l4ss9o{max-width:100%;padding:0 20px;margin-bottom:20px;-webkit-line-clamp:3;}}</style><p class="css-l4ss9o e1o8vm2h4">Using Facebook&#x27;s Prophet, an open-source, time series forecasting procedure to predict SPY (SPDR S&amp;P 500 ETF Trust) closing prices.</p><div class="css-118hiy6 e1o8vm2h5">May 19th, 2021<!-- --> · <!-- -->3<!-- --> min read</div> </div></a></div><style data-emotion-css="1xyudza">.css-1xyudza{margin-bottom:65px;}</style><div class="css-1xyudza eih7p4r4"></div></section><style data-emotion-css="1hk9het">.css-1hk9het{position:absolute;bottom:0;left:0;width:100%;height:590px;z-index:0;pointer-events:none;background:var(--theme-ui-colors-gradient,linear-gradient(180deg,rgba(217,219,224,0) 0%,#D9DBE0 100%));-webkit-transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);transition:background 0.25s var(--ease-in-out-quad),color 0.25s var(--ease-in-out-quad);}</style><div class="css-1hk9het e9nvoze3"></div><style data-emotion-css="4j05o4">.css-4j05o4{width:100%;max-width:1220px;margin:0 auto;padding:0 4rem;}@media (max-width:66.875em){.css-4j05o4{max-width:850px;}}@media (max-width:45.9375em){.css-4j05o4{padding:0 2rem;max-width:527px;}}@media (max-width:33.75em){.css-4j05o4{max-width:100%;}}</style><section class="css-4j05o4 e9w9r0m0"><style data-emotion-css="1nedy0r">.css-1nedy0r{position:relative;margin:140px auto 50px;border-bottom:1px solid var(--theme-ui-colors-horizontalRule,rgba(8,8,11,0.15));}@media (max-width:45.9375em){.css-1nedy0r{margin:60px auto;}}@media (max-width:33.75em){.css-1nedy0r{display:none;}}</style><div class="css-1nedy0r e9nvoze1"></div><style data-emotion-css="1d54ci6">.css-1d54ci6{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:80px;color:var(--theme-ui-colors-grey,#73737D);}@media (max-width:45.9375em){.css-1d54ci6{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-bottom:100px;}}@media (max-width:33.75em){.css-1d54ci6{padding-bottom:50px;}}</style><div class="css-1d54ci6 e9nvoze0"><style data-emotion-css="1pt7hv6">@media (max-width:45.9375em){.css-1pt7hv6{margin-bottom:80px;}}@media (max-width:33.75em){.css-1pt7hv6{margin:120px auto 100px;}}</style><div class="css-1pt7hv6 e9nvoze2">© <!-- -->2021<!-- --> <!-- -->Bradley Schoeneweis</div><div><style data-emotion-css="10tgu6b">.css-10tgu6b{position:relative;margin-left:3.2rem;-webkit-text-decoration:none;text-decoration:none;max-width:16px;}.css-10tgu6b:hover svg:hover *{fill:var(--theme-ui-colors-primary,#000);}.css-10tgu6b:hover svg *{-webkit-transition:fill 0.25s var(--ease-in-out-quad);transition:fill 0.25s var(--ease-in-out-quad);}.css-10tgu6b:first-of-type{margin-left:0;}.css-10tgu6b:last-child{margin-right:0;}.css-10tgu6b[data-a11y='true']:focus::after{content:'';position:absolute;left:-50%;top:-20%;width:200%;height:160%;border:2px solid var(--theme-ui-colors-accent,#6166DC);background:rgba(255,255,255,0.01);border-radius:5px;}@media (max-width:45.9375em){.css-10tgu6b{margin:0 2.2rem;}}</style><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://twitter.com/bschoeneweis" href="https://twitter.com/bschoeneweis" class="css-10tgu6b e1dx16qw0"><svg width="16" height="13" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.0658 2.34438C14.7013 1.96349 15.1892 1.3604 15.419 0.641811C14.8244 0.994439 14.1658 1.25056 13.4648 1.3886C12.9034 0.7905 12.1036 0.416748 11.2185 0.416748C9.51888 0.416748 8.14096 1.79461 8.14096 3.49411C8.14096 3.7353 8.16822 3.97019 8.22068 4.19542C5.66301 4.06708 3.39543 2.84191 1.8776 0.980064C1.6127 1.43458 1.46094 1.96322 1.46094 2.52719C1.46094 3.59485 2.00428 4.5368 2.83003 5.08865C2.32553 5.07268 1.85104 4.93425 1.43608 4.70376C1.43586 4.71659 1.43586 4.72949 1.43586 4.74244C1.43586 6.23349 2.49666 7.47732 3.90448 7.75999C3.64622 7.83033 3.37436 7.86792 3.09366 7.86792C2.89537 7.86792 2.70257 7.84866 2.51471 7.81272C2.90629 9.03537 4.0428 9.92509 5.38945 9.94994C4.33623 10.7753 3.00928 11.2673 1.56749 11.2673C1.31911 11.2673 1.07413 11.2528 0.833374 11.2243C2.19527 12.0975 3.81291 12.6069 5.55081 12.6069C11.2113 12.6069 14.3067 7.91763 14.3067 3.85096C14.3067 3.71753 14.3037 3.5848 14.2978 3.45285C14.899 3.01896 15.4208 2.47694 15.8334 1.8598C15.2815 2.10456 14.6884 2.26998 14.0658 2.34438Z" fill="#73737D"></path></svg><style data-emotion-css="mglztx">.css-mglztx{width:0px;height:0px;visibility:hidden;opacity:0;overflow:hidden;display:inline-block;}</style><span class="css-mglztx e1dx16qw1">Link to $<!-- -->https://twitter.com/bschoeneweis</span></a><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://www.linkedin.com/in/bradley-schoeneweis/" href="https://www.linkedin.com/in/bradley-schoeneweis/" class="css-10tgu6b e1dx16qw0"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.59615 13.125H0.871552V4.36523H3.59615V13.125ZM2.24847 3.16406C1.81878 3.16406 1.44769 3.00781 1.13519 2.69531C0.822692 2.38281 0.666443 2.01171 0.666443 1.58203C0.666443 1.15234 0.822692 0.781248 1.13519 0.468749C1.44769 0.156249 1.81878 0 2.24847 0C2.67816 0 3.04925 0.156249 3.36175 0.468749C3.67425 0.781248 3.8305 1.15234 3.8305 1.58203C3.8305 2.01171 3.67425 2.38281 3.36175 2.69531C3.04925 3.00781 2.67816 3.16406 2.24847 3.16406ZM13.7915 13.125H11.0669V8.84765C11.0669 8.14452 11.0083 7.63671 10.8911 7.32421C10.6763 6.79687 10.2563 6.5332 9.63134 6.5332C9.00634 6.5332 8.56689 6.76757 8.31298 7.23632C8.11767 7.58788 8.02001 8.10546 8.02001 8.78905V13.125H5.32471V4.36523H7.93212V5.5664H7.96142C8.15673 5.17578 8.46923 4.85351 8.89892 4.59961C9.36767 4.28711 9.91454 4.13086 10.5395 4.13086C11.8091 4.13086 12.6977 4.53125 13.2055 5.33203C13.5962 5.97656 13.7915 6.97265 13.7915 8.3203V13.125Z" fill="#73737D"></path></svg><span class="css-mglztx e1dx16qw1">Link to $<!-- -->https://www.linkedin.com/in/bradley-schoeneweis/</span></a><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://github.com/bschoeneweis" href="https://github.com/bschoeneweis" class="css-10tgu6b e1dx16qw0"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 0C3.1325 0 0 3.21173 0 7.17706C0 10.3529 2.00375 13.0353 4.78625 13.9863C5.13625 14.0491 5.2675 13.8338 5.2675 13.6454C5.2675 13.4749 5.25875 12.9097 5.25875 12.3087C3.5 12.6406 3.045 11.8691 2.905 11.4653C2.82625 11.259 2.485 10.622 2.1875 10.4516C1.9425 10.317 1.5925 9.98508 2.17875 9.97611C2.73 9.96714 3.12375 10.4964 3.255 10.7118C3.885 11.7973 4.89125 11.4923 5.29375 11.3039C5.355 10.8374 5.53875 10.5234 5.74 10.3439C4.1825 10.1645 2.555 9.54549 2.555 6.80026C2.555 6.01976 2.82625 5.37382 3.2725 4.87143C3.2025 4.692 2.9575 3.95635 3.3425 2.96951C3.3425 2.96951 3.92875 2.78111 5.2675 3.70516C5.8275 3.54367 6.4225 3.46293 7.0175 3.46293C7.6125 3.46293 8.2075 3.54367 8.7675 3.70516C10.1063 2.77214 10.6925 2.96951 10.6925 2.96951C11.0775 3.95635 10.8325 4.692 10.7625 4.87143C11.2087 5.37382 11.48 6.01079 11.48 6.80026C11.48 9.55446 9.84375 10.1645 8.28625 10.3439C8.54 10.5682 8.75875 10.9988 8.75875 11.6717C8.75875 12.6316 8.75 13.4032 8.75 13.6454C8.75 13.8338 8.88125 14.0581 9.23125 13.9863C11.9963 13.0353 14 10.3439 14 7.17706C14 3.21173 10.8675 0 7 0Z" fill="#73737D"></path></svg><span class="css-mglztx e1dx16qw1">Link to $<!-- -->https://github.com/bschoeneweis</span></a><a target="_blank" rel="noopener nofollow" data-a11y="false" aria-label="Link to https://bradley-schoeneweis.medium.com/" href="https://bradley-schoeneweis.medium.com/" class="css-10tgu6b e1dx16qw0"><svg width="13" height="11" viewBox="0 0 13 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.51041 2.69775C1.51041 2.5415 1.44965 2.40261 1.32812 2.28108L0.15625 0.874837V0.666504H3.82812L6.64061 6.86441L9.11456 0.666504H12.6041V0.874837L11.5885 1.83838C11.5017 1.90782 11.467 2.00331 11.4843 2.12483V9.20815C11.467 9.32968 11.5017 9.42516 11.5885 9.49461L12.5781 10.4581V10.6665H7.63019V10.4581L8.64581 9.46857C8.6979 9.41648 8.72828 9.37742 8.73696 9.35138C8.74564 9.32534 8.74998 9.26891 8.74998 9.18211V3.45296L5.93749 10.6404H5.54686L2.23958 3.45296V8.27065C2.22222 8.47898 2.28298 8.66128 2.42187 8.81753L3.74999 10.4321V10.6404H0V10.4321L1.32812 8.81753C1.48437 8.66128 1.54514 8.47898 1.51041 8.27065V2.69775Z" fill="#73737D"></path></svg><span class="css-mglztx e1dx16qw1">Link to $<!-- -->https://bradley-schoeneweis.medium.com/</span></a></div></div></section></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/converting-html-to-a-pdf-using-python-aws-lambda-and-wkhtmltopdf";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-cf68452a27ba86368f41.js"],"app":["/app-eb064189f86699328b9e.js"],"component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx":["/component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx-2105f3c8a0d648aa7c73.js"],"component---node-modules-narative-gatsby-theme-novela-src-templates-articles-template-tsx":["/component---node-modules-narative-gatsby-theme-novela-src-templates-articles-template-tsx-aff5abdc0212f854a192.js"],"component---node-modules-narative-gatsby-theme-novela-src-templates-author-template-tsx":["/component---node-modules-narative-gatsby-theme-novela-src-templates-author-template-tsx-674a959398d6f1357fd2.js"],"component---src-pages-404-js":["/component---src-pages-404-js-3c420398dabd74157e6e.js"]};/*]]>*/</script><script src="/polyfill-cf68452a27ba86368f41.js" nomodule=""></script><script src="/component---node-modules-narative-gatsby-theme-novela-src-templates-article-template-tsx-2105f3c8a0d648aa7c73.js" async=""></script><script src="/f7f859cd4bf156c2acc6f46f65ba39cb35d4c0a9-f0a4faad5fd03e711cbd.js" async=""></script><script src="/commons-350dcf52cd03bc287f53.js" async=""></script><script src="/f0e45107-a3343bfd228e5d0d4653.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-eb064189f86699328b9e.js" async=""></script><script src="/framework-cd3e1e804d552fa282ef.js" async=""></script><script src="/webpack-runtime-0b1a66e5e73029bfdd8f.js" async=""></script></body></html>